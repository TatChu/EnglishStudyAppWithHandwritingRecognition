"use strict";var languageJs=function(){return{vi:{MESSAGE:"Thông báo!",MESSAGE_REQUIRE_LOGIN:"Bạn chưa đăng nhập.",MESSAGE_LOGIN_FACEBOOK:"Bạn chưa đăng nhập facebook.",MESSAGE_REQUIRE_ROLE:"Bạn không có quyền đề truy cập trang này.",EVENT_STOP:"Thời gian tham gia chương trình đã hết, cảm ơn bạn đã quan tâm.",MENU_HOME:"Trang chủ",MENU_ABOUT:"Giới thiệu",MENU_CONTACT:"Liên hệ",MENU_LANGUAGE:"Ngôn ngữ",DT_SUNDAY:"Cn",DT_MONDAY:"Hai",DT_TUESDAY:"Ba",DT_WEDNESDAY:"Tư",DT_THURSDAY:"Năm",DT_FRIDAY:"Sáu",DT_SATURDAY:"Bảy",DT_JANUARY:"Tháng 1",DT_FEBRUARY:"Tháng 2",DT_MARCH:"Tháng 3",DT_APRIL:"Tháng 4",DT_MAY:"Tháng 5",DT_JUNE:"Tháng 6",DT_JULY:"Tháng 7",DT_AUGUST:"Tháng 8",DT_SEPTEMBER:"Tháng 9",DT_OCTOBER:"Tháng 10",DT_NOVEMBER:"Tháng 11",DT_DECEMBER:"Tháng 12"},en:{MESSAGE:"Infomation!",MESSAGE_REQUIRE_LOGIN:"Bạn chưa đăng nhập.",MESSAGE_LOGIN_FACEBOOK:"Bạn chưa đăng nhập facebook.",MESSAGE_REQUIRE_ROLE:"Bạn không có quyền đề truy cập trang này.",EVENT_STOP:"Thời gian tham gia chương trình đã hết, cảm ơn bạn đã quan tâm EN.",MENU_HOME:"Home",MENU_ABOUT:"About",MENU_CONTACT:"Contact",MENU_LANGUAGE:"Languages",DT_SUNDAY:"Sun",DT_MONDAY:"Mon",DT_TUESDAY:"Tue",DT_WEDNESDAY:"Wed",DT_THURSDAY:"Thu",DT_FRIDAY:"Fri",DT_SATURDAY:"Sat",DT_JANUARY:"Jan",DT_FEBRUARY:"Feb",DT_MARCH:"Mar",DT_APRIL:"Apr",DT_MAY:"May",DT_JUNE:"Jun",DT_JULY:"Jul",DT_AUGUST:"Aug",DT_SEPTEMBER:"Sep",DT_OCTOBER:"Otc",DT_NOVEMBER:"Nov",DT_DECEMBER:"Dec"}}}(),settingJs=function(){var e=(new Date,window.location.host,{appPrefix:"EnglishStudyApp",facebookAppId:settings.facebookId,webUrl:settings.services.webUrl,apiUrl:settings.services.apiUrl,socketUrl:settings.services.socketApi,adminUrl:settings.services.admin,userApiUrl:settings.services.apiUrl,logApiUrl:settings.services.logApi,uploadApiUrl:settings.services.uploadApi,uploadDirectory:{general:"/files/",category:"/files/category_image/",vocabulary:"/files/vocabulary_image/",product:"/files/product_image/",certificate:"/files/certificate_image/",blog:"/files/blog_image/",thumb:"/files/thumb_image/",thumb_product:"/files/thumb_image/product_image/",tmp:"/files/tmp/",avatar:"/files/avatar_image/",media_old:"/files/media_old/",media_old_product:"/files/media_old/product/"}});return{configs:e,appPrefix:e.appPrefix,storageExpireTime:void 0}}(),DateTime=function(){function e(e,n){var t=864e5;return Math.round((n.getTime()-e.getTime())/t)}function n(e,n){return e.getMonth()-n.getMonth()+12*(e.getFullYear()-n.getFullYear())+1}function t(e,n,t){return e>=n&&e<=t}function a(e,n){var t=n.filter(function(n){return new Date(n).toDateString()===e.toDateString()});return 0!==t.length}function o(e){return e.getTime()/1e3}function r(e){var n=e;n=n.replace(/\D/g," ");var t=n.split(" ");t[1]--;var a=new Date(Date.UTC(t[0],t[1],t[2],t[3],t[4],t[5]));return a}function i(e){var n=new Date;return new Date(n.getFullYear(),e,0).getDate()}function u(e){var n=new Date,t=0;n.getMonth()<e.getMonth()?t=1:n.getMonth()==e.getMonth()&&n.getDate()<e.getDate()&&(t=1);var a=n.getFullYear()-e.getFullYear()-t;return a}return{dayCount:e,monthCount:n,dateBetween:t,dateContain:a,dateToTimestamp:o,isoDateToDate:r,daysInMonth:i,getAge:u}}(),ExcelJs=function(){function e(){var e=[[1,2,3,.5,7],[!0,!1,null,"sheetjs"],["foo","bar",new Date("2014-02-19T14:30Z"),"0.3"],["baz",null,"qux"]],t={type:"xlsx",sheetName:"SheetJS1",fileName:"dl"};n(e,t)}function n(e,n){n={type:n.type||"xlsx",sheetName:n.sheetName||"SheetJS",fileName:n.fileName||"test"};var t=n.sheetName,i=new r,u=a(e);i.SheetNames.push(t),i.Sheets[t]=u;var c={bookType:n.type,bookSST:!1,type:"binary"},s=XLSX.write(i,c);saveAs(new Blob([o(s)],{type:""}),n.fileName+"."+n.type)}function t(e,n){n&&(e+=1462);var t=Date.parse(e);return(t-new Date(Date.UTC(1899,11,30)))/864e5}function a(e,n){for(var a={},o={s:{c:1e7,r:1e7},e:{c:0,r:0}},r=0;r!=e.length;++r)for(var i=0;i!=e[r].length;++i){o.s.r>r&&(o.s.r=r),o.s.c>i&&(o.s.c=i),o.e.r<r&&(o.e.r=r),o.e.c<i&&(o.e.c=i);var u={v:e[r][i]};if(null!=u.v){var c=XLSX.utils.encode_cell({c:i,r:r});"number"==typeof u.v?u.t="n":"boolean"==typeof u.v?u.t="b":u.v instanceof Date?(u.t="n",u.z=XLSX.SSF._table[14],u.v=t(u.v)):u.t="s",a[c]=u}}return o.s.c<1e7&&(a["!ref"]=XLSX.utils.encode_range(o)),a}function o(e){for(var n=new ArrayBuffer(e.length),t=new Uint8Array(n),a=0;a!=e.length;++a)t[a]=255&e.charCodeAt(a);return n}function r(){return this instanceof r?(this.SheetNames=[],void(this.Sheets={})):new r}return{exportExcel:n,testExcel:e}}(),helperJsCustom=function(){function e(e,n,t,a,o,r){if("send"==e){if("event"==n){var i=t,u=a,c=o;"undefined"!=typeof ga&&ga.getAll()[0].send(n,i,u,c)}if("pageview"==n){var s=t;"undefined"!=typeof ga&&ga.getAll()[0].send(n,s)}}}function n(e,n,t){function a(t){return t[e]===n}return t.find(a)}function t(){var e=0;$(window).on("scroll",function(n){var t=$(this).scrollTop();t>e?console.log("down"):console.log("up"),e=t})}function a(e){e.replaceWith(e.val("").clone(!0))}function o(e){var n=!0;if(isNaN(e))if(null===e||void 0===e)n=!0;else for(var t in e)e.hasOwnProperty(t)&&(n=!1);else n=!1;return n}function r(e,n){var t=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),a="[\\?&]"+t+"=([^&#]*)",o=new RegExp(a),r=o.exec(e);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}function i(e,n,t,a,o){e=e||0,n=isNaN(n=Math.abs(n))?0:n,t=void 0!==t?t:"",a=a||".",o=o||",";var r=e<0?"-":"",i=parseInt(e=Math.abs(+e||0).toFixed(n),10)+"",u=(u=i.length)>3?u%3:0;return t+r+(u?i.substr(0,u)+a:"")+i.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+a)+(n?o+Math.abs(e-i).toFixed(n).slice(2):"")}function u(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function c(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function s(e,n){var t=null;return function(){var a=this,o=arguments;clearTimeout(t),t=setTimeout(function(){e.apply(a,o)},n)}}function d(e,n,t){n||(n=250);var a,o;return function(){var r=t||this,i=+new Date,u=arguments;a&&i<a+n?(clearTimeout(o),o=setTimeout(function(){a=i,e.apply(r,u)},n)):(a=i,e.apply(r,u))}}function p(e,n){var t=e.replace("#","");t=t.match(new RegExp("(.{"+t.length/3+"})","g"));for(var a=0;a<t.length;a++)t[a]=parseInt(1==t[a].length?t[a]+t[a]:t[a],16);return"undefined"!=typeof n&&t.push(n),"rgba("+t.join(",")+")"}function l(e,n){function t(e){o++,o===e&&a()}function a(){"function"==typeof n&&n()}var o=0,r=e.length;if(r)for(var i=0;i<r;i++){var u=new Image;u.src=e[i],u.onload=function(e){t(r),console.info("File loaded: ",e.target.currentSrc)},u.onerror=function(e){t(r),console.info("Cannot load file: ",e.target.currentSrc)}}else a()}function h(e,n,t){n="undefined"!=typeof n?n:1e3,t="undefined"!=typeof t?t:0;var a=$(e).offset(),o=a.top+t;$("html,body").animate({scrollTop:o},n)}function g(e){e="undefined"!=typeof e?e:1e3,$("html,body").animate({scrollTop:0},e)}function f(e,n){return Math.random()*(n-e+1)+e}function m(e,n){return Math.floor(Math.random()*(n-e+1))+e}function y(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}return{detectScrollDirection:t,clearFileInput:a,isUndefinedNullEmpty:o,getQueryString:r,formatMoney:i,enterFullScreen:u,exitFullScreen:c,debounce:s,throttle:d,hexToRgb:p,preloader:l,scrollToElement:h,scrollToTop:g,randomRangeFloat:f,randomRangeInt:m,extend:y,findObject:n,GA:e}}();!function(){$.fn.bzAccordion=function(e,n){var t=this.find(".item");n&&(t.first().find(".question").addClass("expanded"),t.first().find(".answer").show()),t.find(".question").click(function(){$(this).hasClass("expanded")?($(this).removeClass("expanded"),$(this).parent().find(".answer").slideUp(200)):(e&&$.each(t.find(".question"),function(e,n){$(n).removeClass("expanded"),$(n).parent().find(".answer").slideUp(200)}),$(this).addClass("expanded"),$(this).parent().find(".answer").slideDown(200))})}}(),function(){Array.prototype.getIndexBy=function(e,n){for(var t=0;t<this.length;t++)if(this[t][e]==n)return t;return-1},Array.prototype.removeAt=function(e){var n=this.splice(e,1);return n},String.prototype.format=function(){var e=arguments;return this.replace(/\{\{|\}\}|\{(\d+)\}/g,function(n,t){return"{{"==n?"{":"}}"==n?"}":e[t]})},String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}();var sortJs=function(){function e(e){if(e.length<=1)return e;for(var n=e.length,t=0;t<n;t++)for(var a=0;a<n-1;a++)if(e[a]>e[a+1]){var o=e[a];e[a]=e[a+1],e[a+1]=o}return e}function n(e){if(e.length<=1)return e;var t=Math.floor((e.length-1)/2),a=e[t],o=[],r=[];e=e.slice(0,t).concat(e.slice(t+1));for(var i=0;i<e.length;i++)e[i]<a?o.push(e[i]):r.push(e[i]);return[].concat(n(o),[a],n(r))}function t(e){if(e.length<=1)return e;var n=Math.floor(e.length/2),a=e.slice(0,n),o=e.slice(n),r=function(e,n){for(var t=[];e.length&&n.length;)e[0]<n[0]?t.push(e.shift()):t.push(n.shift());return t.concat(e).concat(n)};return r(t(a),t(o))}function a(e){for(var n=0;n<e.length;n++){for(var t=n,a=n+1;a<e.length;a++)e[a]<e[t]&&(t=a);if(t!=n){var o=e[t];e[t]=e[n],e[n]=o}}return e}function o(e){for(var n=0;n<e.length;n++)for(var t=n-1,a=e[n];t>=0&&e[t]>a;)e[t+1]=e[t],e[t]=a,t--;return e}return{bubble:e,quick:n,merge:t,selection:a,insertion:o}}(),Storage=function(){function e(e){var n=new Date,a=Math.round(+n/1e3),o=JSON.parse(localStorage.getItem(settingJs.appPrefix+"."+e))||{},r=o.storageExpireTime||0;return r&&r<a?void t(settingJs.appPrefix+"."+e):o.store}function n(e,n,t){var a=new Date,o=Math.round(a.setSeconds(a.getSeconds()+t)/1e3),r=JSON.stringify({storageExpireTime:o,store:n});try{localStorage.setItem(settingJs.appPrefix+"."+e,r)}catch(i){i==QUOTA_EXCEEDED_ERR&&alert("Quota exceeded!")}return r}function t(e){localStorage.removeItem(settingJs.appPrefix+"."+e)}function a(){localStorage.clear()}return{get:e,set:n,remove:t,clear:a}}(),Application=function(){function e(e){angular.module(a).requires.push(e)}function n(e,n,t,a,o,r,i){e.errorOnUnhandledRejections(!1),a.setMessageTemplate("assets/global/message/view.html"),angular.extend(o,{extendedTimeOut:1e3,timeOut:1e3,newestOnTop:!0,positionClass:"toast-bottom-right",preventDuplicates:!1,preventOpenDuplicates:!1,tapToDismiss:!0,allowHtml:!0,closeButton:!0,target:"body"}),r.startSymbol("[["),r.endSymbol("]]"),t.html5Mode({enabled:!0,requireBase:!1,rewriteLinks:!1}),n.defaults.withCredentials=!0,n.defaults.headers.post["Content-Type"]="application/json; charset=UTF-8"}function t(e,n,t,a,o,r,i){e.Cart={items:[],total:0,total_quantity:0},e.TextOrderConfig=[],e.promotionForOrderDeleveryOnAffternoon={value:0,status:!1,type:"PC"},e.promotionForFirstOrder={value:0,status:!1,type:"PC"},e.freeShipUrban={value:999999999,status:!1,type:"MN"},e.freeShipSuburb={value:999999999,status:!1,type:"MN"},window.fbAsyncInit=function(){FB.init({appId:settingJs.configs.facebookAppId,status:!0,xfbml:!0,version:"v2.9"})},e.facebookAppId=settingJs.configs.facebookAppId,angular.element("body").removeClass("hide"),a(function(){angular.element("#mod-footer").css({visibility:"visible",position:"relative"})},1500),e._=window._,e.pageData={},e.pageMethods={},e.pageMethods.authSvc=r,e.Url=settingJs.configs.webUrl,o.NUMBER_FORMATS.GROUP_SEP=".",e.list_track_fpq=[]}n.$inject=["$qProvider","$httpProvider","$locationProvider","$bzPopupProvider","toastrConfig","$interpolateProvider","$resourceProvider"],t.$inject=["$rootScope","$window","$document","$timeout","$locale","authSvc","notiSvc"];var a="bzApp",o=["ui.bootstrap","ngSanitize","ngAnimate","ngMessages","ngResource","ui.router","toastr","ngPopup","daterangepicker","angularjs-datetime-picker","ngFileUpload","ngTable","angulike","webcam"];return angular.module(a,o).config(n).run(t),angular.element(document).ready(function(){!function(e,n,t){var a,o=e.getElementsByTagName(n)[0];e.getElementById(t)||(a=e.createElement(n),a.id=t,a.src="//connect.facebook.net/vi_VN/sdk.js",o.parentNode.insertBefore(a,o))}(document,"script","facebook-jssdk"),angular.bootstrap(document,[a])}),{registerModule:e}}();!function(){function e(e,n,t,a){function o(n,t){var a=e.defer();return"add-product"===n?s(t.product,t.quantity):"set-quantity"===n?c(t.product,t.quantity):"delete-product"===n?u(t.product):"delete-cart"===n?i():(a.reject("Type mismach"),a.promise)}function r(){var o=e.defer();return a.api(n.settings.services.apiUrl+"/order/cart").get({},function(e){t.Cart=e.cart,t.$broadcast("Cart:getCart",e.cart),o.resolve(e)},function(e){o.reject(e)}),o.promise}function i(){var o=e.defer();return a.api(n.settings.services.apiUrl+"/order/delete-cart").get({},function(e){t.Cart={items:[],total:0},t.$broadcast("Cart:getCart",e.cart),o.resolve(e)},function(e){o.reject(e)}),o.promise}function u(o){var r=e.defer();return a.api(n.settings.services.apiUrl+"/order/delete-product/"+o).get({},function(e){t.Cart=e.cart,t.$broadcast("Cart:getCart",e.cart),r.resolve(e)},function(e){r.reject(e)}),r.promise}function c(o,r){var i=e.defer();return a.api(n.settings.services.apiUrl+"/order/set-quantity/"+o+"/"+r).get({},function(e){e.success&&(t.Cart=e.cart,t.$broadcast("Cart:getCart",e.cart)),i.resolve(e)},function(e){i.reject(e)}),i.promise}function s(n,o){var r=e.defer();return a.api(settingJs.configs.userApiUrl+"/order/"+n+"/"+o).get({},function(e){e.success&&(t.Cart=e.cart,t.$broadcast("Cart:getCart",e.cart)),r.resolve(e)},function(e){r.reject(e)}),r.promise}return{getCart:r,update:o}}function n(e,n){return n.api(settingJs.configs.userApiUrl+"/user/:method/:id",{method:"@method",id:"@id"})}function t(e,n){function t(t){var a=e.defer();return n.api(settingJs.configs.userApiUrl+"/upload/base64").save(t,function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}return{uploadBase64:t}}function a(e,n){function t(){var t=e.defer();return n.api(settingJs.configs.adminUrl+"/noti-dup-contact").get({},{},function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}return{getDupContact:t}}function o(e,n,t,a,o){function r(){return 0!==_.intersection(t.user.scope,["super-admin"]).length}function i(){return 0!==_.intersection(t.user.scope,["admin"]).length}function u(e,n){var a="string"==typeof n,o=t.permissions,r=null;if(angular.forEach(o,function(n,t){t===e&&(r=n)}),r){if("*"===r[0])return!0;if(a&&1===_.intersection([n],r).length)return!0;if(_.intersection(n,r).length===n.length)return!0}return!1}function c(e){return _.intersection(t.user.scope,e).length>0}function s(e){var n=new a(e);return n.$save({method:"register"})}function d(){var e=t.user;return e}function p(e){return Storage.set(settingJs.appPrefix+"bzp",e,settingJs.storageExpireTime),Storage.set(settingJs.appPrefix+"bzl",!0,settingJs.storageExpireTime),e}function l(){var e=Storage.get(settingJs.appPrefix+"bzl");return!!e}function h(e,a,r){var i=n.defer();return o.api(t.settings.services.apiUrl+"/user/login").save({},e,function(e){p(e),i.resolve(e),angular.isFunction(a)&&a(e)},function(e){i.reject(e),angular.isFunction(r)&&r(e)}),i.promise}function g(e){d();o.api(t.settings.services.apiUrl+"/user/logout").save({},{},function(n){p(void 0),angular.isFunction(e)&&e(n),t.location.href=settings.services.webUrl})}function f(n){var a=e.open({animation:!0,templateUrl:settings.services.webUrl+"/modules/web-auth/view/client/popup/login/view.html",controller:"popLoginCtrl",controllerAs:"vmLogin"});a.result.then(function(e){return e||(n?t.location.href=n:t.location.reload()),e})}function m(){e.open({animation:!0,templateUrl:settings.services.webUrl+"/modules/web-auth/view/client/popup/register/view.html",controller:"popRegisterCtrl",controllerAs:"vmRegister"})}function y(){e.open({animation:!0,templateUrl:settings.services.webUrl+"/modules/web-auth/view/client/popup/forgot-pass/view.html",controller:"popForgotPassCtrl",controllerAs:"vmForgotPass"})}function v(){e.open({animation:!0,templateUrl:"modules/admin-user/view/client/popup/change-pass/view.html",controller:"popChangePassCtrl",controllerAs:"mvCPass"})}function H(e){var n=new a(e);return n.$save({method:"change-password"})}function T(e){var n=new a(e);return n.$save({method:"forgot-password"})}function b(e){var n=new a(e);return n.$save({method:"reset-password"})}function C(e,n){var t=new a(e);return t.$update({id:n})}function $(){var e=n.defer();return FB.getLoginStatus(function(n){if("connected"===n.status){n.authResponse.accessToken;FB.api("/me",{fields:"id,name,email,picture"},function(n){e.resolve(n)})}else FB.login(function(n){if("not_authorized"===n.status&&e.resolve({error:"Vui lòng đồng ý sử dụng ứng dụng để đăng nhập tài khoản"}),"connected"===n.status){n.authResponse.accessToken;FB.api("/me",{fields:"id,name,email,picture"},function(n){e.resolve(n)})}},{scope:"email"})}),e.promise}function w(e,a,r){var i=n.defer(),u={email:e.email,provider_id:e.id,name:e.name,profile_picture:e.profile_picture};return o.api(t.settings.services.userApi+"/user/facebook-login").save({},u,function(e){p(e),i.resolve(e),angular.isFunction(a)&&a(e)},function(e){i.reject(e),angular.isFunction(r)&&r(e)}),i.promise}return t.user=t.user||{},{isSuperAdmin:r,isAdmin:i,hasPermission:u,exist:c,register:s,getProfile:d,setProfile:p,isSignedIn:l,siteLogin:h,siteLogout:g,popLogin:f,popRegister:m,popForgotPass:y,popChangePass:v,postChangePass:H,forgotPassword:T,resetPassword:b,update:C,getFacebook:$,facebookLogin:w}}function r(e){function n(e){if(e){var n=e.toLowerCase();return n=n.replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a"),n=n.replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e"),n=n.replace(/i|í|ì|ỉ|ĩ|ị/gi,"i"),n=n.replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o"),n=n.replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u"),n=n.replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y"),n=n.replace(/đ/gi,"d"),n=n.replace(/\`|\~|\!|\@|\#|\||\$|\%|\^|\&|\*|\(|\)|\+|\=|\,|\.|\/|\?|\>|\<|\'|\"|\:|\;|_/gi,""),n=n.replace(/ /gi,"-"),n=n.replace(/\-\-\-\-\-/gi,"-"),n=n.replace(/\-\-\-\-/gi,"-"),n=n.replace(/\-\-\-/gi,"-"),n=n.replace(/\-\-/gi,"-"),n="@"+n+"@",n=n.replace(/\@\-|\-\@|\@/gi,"")}return e}function t(e,n,t){function a(t){return t[e]===n}return t.find(a)}function a(e,n,t){var o,r=[];if(t=t||"",angular.isArray(e)){var i=e.filter(function(e){return e.parentId===n});if(i.length)for(var u=0;u<i.length;u++){i[u].name=t+i[u].name,r.push(i[u]);for(var c=a(e,i[u].id,t+"—"),s=0;s<c.length;s++)r.push(c[s])}o=r}else o=e;return o}function o(){e.open({templateUrl:"modules/popup/cropper/view.html",closeOnBg:!1,data:{ratio:1,width:320,height:320,type:"image/jpeg",event:"bz:CropperAvatarSuccess",image:"images/demo.jpg",props:{btnOk:"Lưu",btnCancel:"Huỷ bỏ",btnOkEvent:"bz:CropperAvatarOk",btnCancelEvent:"bz:CroppperAvatarCancel"}}})}function r(e,n){"undefined"!=typeof Storage?Storage.set(e,n,settingJs.storageExpireTime):console.error("Sorry! The browser does not support Storage.")}function i(e){if("undefined"!=typeof Storage){var n=Storage.get(e);return n}return console.error("Sorry! The browser does not support Storage."),null}function u(e){"undefined"!=typeof Storage?Storage.remove(e):console.error("Sorry! The browser does not support Storage.")}function c(e){r(settingJs.appPrefix+"_infoUser",e)}function s(){return i(settingJs.appPrefix+"_infoUser")}function d(){u(settingJs.appPrefix+"_infoUser")}return{recusive:a,cropAvatar:o,findObject:t,textToSlug:n,setLocalStorage:r,getLocalStorage:i,removeLocalStorage:u,setInfoUser:c,getInfoUser:s,removeInfoUser:d}}function i(e){function n(n,t,a){return a=a||{},a.get=angular.extend({},a.get),a.query=angular.extend({isArray:!0},a.query),a.update=angular.extend({method:"PUT"},a.update),a.upload=angular.extend({method:"POST",headers:{"Content-Type":void 0},transformRequest:angular.identity},a.upload),e(n,t,a)}return{api:n}}function u(e){return{load:function(n){var t=e.defer();return helperJs.preloader(n,function(){t.resolve()}),t.promise}}}r.$inject=["$bzPopup"],i.$inject=["$resource"],u.$inject=["$q"],o.$inject=["$uibModal","$q","$window","userApiFac","bzResourceSvc"],a.$inject=["$q","bzResourceSvc"],n.$inject=["$window","bzResourceSvc"],e.$inject=["$q","$window","$rootScope","bzResourceSvc"],t.$inject=["$q","bzResourceSvc"],angular.module("bzApp").service("bzUtilsSvc",r).service("bzResourceSvc",i).factory("bzPreloadSvc",u).service("authSvc",o).service("notiSvc",a).factory("userApiFac",n).service("orderApiSvc",e).service("bzUpload",t)}(),function(){function e(e){return function(n){return e.trustAsHtml(n)}}function n(e){return function(n){return e.trustAsResourceUrl(n)}}function t(){return function(e){return helperJs.formatMoney(e)}}function a(){return function(e,n){return helperJs.hexToRgb(e,n)}}function o(){return function(e){return String(e).replace(/<[^>]+>/gm,"")}}function r(){return function(e,n){var t=new Date(e),a=moment(t).format(n);return a}}function i(){return function(e,n){return n=+n,angular.isArray(e)?e.slice(n):e}}function u(){return function(e){return Object.keys(e).length}}e.$inject=["$sce"],n.$inject=["$sce"],angular.module("bzApp").filter("bzTrustHtml",e).filter("bzTrustResource",n).filter("bzCurrency",t).filter("bzHexToRgb",a).filter("bzTripHtml",o).filter("bzFormatDate",r).filter("bzFirstPage",i).filter("bzObjectKeysLength",u)}(),function(){function e(e,n){return{require:"ngModel",link:function(n,t,a,o){return e(function(){var e,r=a.checkboxClass;return e=a.value,n.$watch(a.ngModel,function(e){$(t).iCheck("update")}),$(t).iCheck({radioClass:"iradio_square-blue",checkboxClass:r||"icheckbox_square-blue",increaseArea:"20%"}).on("ifChanged",function(r){if("checkbox"===$(t).attr("type")&&a.ngModel&&n.$apply(function(){return o.$setViewValue(r.target.checked)}),"radio"===$(t).attr("type")&&a.ngModel)return n.$apply(function(){return o.$setViewValue(e)})})})}}}function n(){return{require:"ngModel",scope:{atrOptions:"=atrOptions"},link:function(e,n,t,a){var o={timePicker:!1,timePickerIncrement:30,singleDatePicker:!0,autoUpdateInput:!1,locale:{format:"DD/MM/YYYY"}};o=angular.extend({},o,e.atrOptions),n.daterangepicker(o),n.on("apply.daterangepicker",function(e,n){var t={startDate:n.startDate,endDate:n.endDate};return o.singleDatePicker?(n.element.val(n.startDate.format(n.locale.format)),a.$setViewValue(t.startDate)):(n.element.val(n.startDate.format(n.locale.format)+" - "+n.endDate.format(n.locale.format)),a.$setViewValue(t))}),a&&(a.$render=function(){if(a.$viewValue){var e=moment(a.$viewValue).format(o.locale.format);n.val(e||"")}})}}}function t(e){return{require:"ngModel",scope:{atrOptions:"=atrOptions"},link:function(n,t,a,o){var r={timePicker:!1,timePickerIncrement:30,singleDatePicker:!0,autoUpdateInput:!1,locale:{format:"DD/MM/YYYY"}};r=angular.extend({},r,n.atrOptions),e(function(){t.daterangepicker(r),t.on("apply.daterangepicker",function(e,n){var t={startDate:n.startDate,endDate:n.endDate};return n.element.val(n.startDate.format(n.locale.format)),o.$setViewValue(t.startDate)}),o&&(o.$render=function(){if(o.$viewValue){var e=moment(o.$viewValue).format(r.locale.format);t.val(e||"")}})},10)}}}function a(e){return{require:"ngModel",scope:{modelValue:"=ngModel"},link:function(n,t,a,o){e(function(){var e=t.colorpicker({color:n.modelValue});e.on("changeColor",function(e){n.$apply(function(){o.$setViewValue(e.color.toString())})})})}}}function o(e,n){return{link:function(n,t,a){function o(n){e(function(){autosize(t)},n)}o(0),n.$on("bz:redrawAutogrow",function(){o(100)})}}}function r(e){return{require:"?ngModel",transclude:!0,restrict:"A",link:function(n,t,a,o){var r;e(function(){function e(){return n.$apply(function(){return o.$setViewValue(r.getData())})}if(r=CKEDITOR.replace(t[0],{}),o)return r.on("instanceReady",function(){return r.setData(o.$viewValue)}),r.on("change",e),r.on("dataReady",e),r.on("key",e),r.on("paste",e),r.on("selectionChange",e),o.$render=function(){return r.setData(o.$viewValue)}})}}}function i(){return{link:function(e,n,t){var a=e.$eval(t.bzInputMask);Inputmask(a).mask(n[0])}}}function u(){return{restrict:"E",replace:!0,template:'<div id="bz-progressbar"><div></div></div>',link:function(e,n,t){e.$on("$stateChangeStart",function(e,t,a,o,r){function i(e){setTimeout(function(){if(e<90){var t=helperJs.randomRangeInt(e,e+10);n.find(">div").css("width",t+"%"),e+=t,i(e)}},helperJs.randomRangeInt(200,500))}setTimeout(function(){n.find(">div").css("width",0),n.fadeIn(200)},500),i(0)}),e.$on("$stateChangeSuccess",function(e,t,a,o,r){n.find(">div").css("width","100%"),setTimeout(function(){n.fadeOut(200)},500)})}}}function c(){return{replace:!0,transclude:!0,template:'<div><img ng-src="{{icon}}" /><span>{{caption}}</span></div>',link:function(e,n,t){var a=angular.element(t["for"]);e.caption=t.caption,e.icon=t.icon,n.on("click",function(e){n.hide(),a.focus()}),a.on("focus",function(e){n.hide()}),a.on("blur",function(e){var t=a.val();t.length||n.show()})}}}function s(e){return{link:function(n,t,a){var o=e(a.bzFileModel),r=o.assign;t.bind("change",function(){n.$apply(function(){r(n,t[0].files)})})}}}function d(e,n){return{restrict:"A",link:function(t,a,o){function r(a,o){t.allowInputControls&&(t.allowInputControls=!1,"up"===o?s++:s--,settingJs.pageTransitionLoop?(s>i&&(s=0),s<0&&(s=i)):(s>i&&(s=i),s<0&&(s=0),n(function(){t.allowInputControls=!0},settingJs.pageTransitionDelay)),e.go(settingJs.pageTransitionSequence[s].stateName))}var i=settingJs.pageTransitionSequence.length-1,u="",c="",s=0;t.allowInputControls=!0,t.$on("bz:allowInputControls",function(e,n){t.allowInputControls=n}),t.$on("$stateChangeSuccess",function(e,a,o,r,i){u=a.name,s=settingJs.pageTransitionSequence.getIndexBy("stateName",u),n(function(){t.allowInputControls=!0},settingJs.pageTransitionDelay)}),a.on("keydown",function(n){u=e.current.name,38!==n.keyCode&&39!==n.keyCode||(c="down",r(u,c)),37!==n.keyCode&&40!==n.keyCode||(c="up",r(u,c))}),a.mousewheel(function(e,n,t,a){c=n>0?"down":"up",r(u,c)})}}}function p(){return{require:"ngModel",link:function(e,n,t,a){var o=$(t.bzValidPasswordMatch);a.$parsers.push(function(e){return a.$setValidity("match",""!==e&&e===o[0].value),e})}}}function l(){return{require:"ngModel",link:function(e,n,t,a){var o=[/[^\w\s]+/,/[A-Z]+/,/\w+/,/\d+/],r=$(t.bzPasswordStrength);n.on("focus",function(e){r.show()}),n.on("blur",function(e){r.hide()}),a.$parsers.push(function(n){var t=0;n.length>=8&&(angular.forEach(o,function(e){e.test(n)&&t++}),e.passwordStrength=t)})}}}function h(){return{require:"ngModel",link:function(e,n,t,a){var o=parseInt(t.maxWords),r=parseInt(t.minWords)||0,i=0;a.$parsers.push(function(e){return i=e.trim().replace(/(\r\n|\n|\r)/gm," ").replace(/\.\s+/g," ").split(" ").length,a.$setValidity("mixwords",i>=r),a.$setValidity("maxwords",i<=o),e})}}}function g(e){return{require:"ngModel",scope:{bzValidExist:"="},link:function(n,t,a,o){var r=n.bzValidExist;t.on("focus",function(e){$(r.selector).hide()}),t.on("blur",function(t){r.value=o.$viewValue;var a=e(r.url),i=new a(r);i.$save(function(e){e.status&&$(r.selector).show()}),n.$apply()})}}}function f(){var e=[/[^\w\s]+/,/[A-Z]+/,/\w+/,/\d+/];return{require:"ngModel",link:function(n,t,a,o){o.$parsers.push(function(n){var t=!0;return angular.forEach(e,function(e){t=t&&e.test(n)}),o.$setValidity("passwordcharacters",t),n})}}}function m(e){return{require:"ngModel",link:function(n,t,a,o){function r(e){for(var n=[],t=[],a=0;a<i.length;a++)i[a].size>u&&n.push(i[a]),c.indexOf(i[a].type)===-1&&t.push(i[a]);return o.$setValidity("filesize",0===n.length),o.$setValidity("filetype",0===t.length),e}var i=[],u=a.fileSize,c=a.fileType.split(","),s=e(a.ngModel),d=s.assign;n.$on("bz:clearFileInput",function(){o.$setViewValue(null),o.$render(),t.val("")}),t.on("change",function(){n.$apply(function(){i=t[0].files,d(n,t[0].files),r(t.val())})})}}}function y(){return{replace:!0,transclude:!0,template:'<button><ng-transclude></ng-transclude><div class="circle animFade" ng-if="type===\'circle\'"></div><div class="bar animFade" ng-if="type===\'bar\'"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div></div></button>',link:function(e,n,t){e.type=t.loadingIcon||"circle"}}}function v(e,n){return{link:function(t,a,o){function r(e){switch(e){case 0:u="pt-page-fadeOut",i="pt-page-fadeIn";break;case 1:u="pt-page-moveToLeft",i="pt-page-moveFromRight";break;case 2:u="pt-page-moveToRight",i="pt-page-moveFromLeft";break;case 3:u="pt-page-moveToTop",i="pt-page-moveFromBottom";break;case 4:u="pt-page-moveToBottom",i="pt-page-moveFromTop";break;case 5:u="pt-page-fade",i="pt-page-moveFromRight pt-page-ontop";break;case 6:u="pt-page-fade",i="pt-page-moveFromLeft pt-page-ontop";break;case 7:u="pt-page-fade",i="pt-page-moveFromBottom pt-page-ontop";break;case 8:u="pt-page-fade",i="pt-page-moveFromTop pt-page-ontop";break;case 9:u="pt-page-moveToLeftFade",i="pt-page-moveFromRightFade";break;case 10:u="pt-page-moveToRightFade",i="pt-page-moveFromLeftFade";break;case 11:u="pt-page-moveToTopFade",i="pt-page-moveFromBottomFade";break;case 12:u="pt-page-moveToBottomFade",i="pt-page-moveFromTopFade";break;case 13:u="pt-page-moveToLeftEasing pt-page-ontop",i="pt-page-moveFromRight";break;case 14:u="pt-page-moveToRightEasing pt-page-ontop",i="pt-page-moveFromLeft";break;case 15:u="pt-page-moveToTopEasing pt-page-ontop",i="pt-page-moveFromBottom";break;case 16:u="pt-page-moveToBottomEasing pt-page-ontop",i="pt-page-moveFromTop";break;case 17:u="pt-page-scaleDown",i="pt-page-moveFromRight pt-page-ontop";break;case 18:u="pt-page-scaleDown",i="pt-page-moveFromLeft pt-page-ontop";break;case 19:u="pt-page-scaleDown",i="pt-page-moveFromBottom pt-page-ontop";break;case 20:u="pt-page-scaleDown",i="pt-page-moveFromTop pt-page-ontop";break;case 21:u="pt-page-scaleDown",i="pt-page-scaleUpDown pt-page-delay300";break;case 22:u="pt-page-scaleDownUp",i="pt-page-scaleUp pt-page-delay300";break;case 23:u="pt-page-moveToLeft pt-page-ontop",i="pt-page-scaleUp";break;case 24:u="pt-page-moveToRight pt-page-ontop",i="pt-page-scaleUp";break;case 25:u="pt-page-moveToTop pt-page-ontop",i="pt-page-scaleUp";break;case 26:u="pt-page-moveToBottom pt-page-ontop",i="pt-page-scaleUp";break;case 27:u="pt-page-scaleDownCenter",i="pt-page-scaleUpCenter pt-page-delay400";break;case 28:u="pt-page-rotateRightSideFirst",i="pt-page-moveFromRight pt-page-delay200 pt-page-ontop";break;case 29:u="pt-page-rotateLeftSideFirst",i="pt-page-moveFromLeft pt-page-delay200 pt-page-ontop";break;case 30:u="pt-page-rotateTopSideFirst",i="pt-page-moveFromTop pt-page-delay200 pt-page-ontop";break;case 31:u="pt-page-rotateBottomSideFirst",i="pt-page-moveFromBottom pt-page-delay200 pt-page-ontop";break;case 32:u="pt-page-flipOutRight",i="pt-page-flipInLeft pt-page-delay500";break;case 33:u="pt-page-flipOutLeft",i="pt-page-flipInRight pt-page-delay500";break;case 34:u="pt-page-flipOutTop",i="pt-page-flipInBottom pt-page-delay500";break;case 35:u="pt-page-flipOutBottom",i="pt-page-flipInTop pt-page-delay500";break;case 36:u="pt-page-rotateFall pt-page-ontop",i="pt-page-scaleUp";break;case 37:u="pt-page-rotateOutNewspaper",i="pt-page-rotateInNewspaper pt-page-delay500";break;case 38:u="pt-page-rotatePushLeft",i="pt-page-moveFromRight";break;case 39:u="pt-page-rotatePushRight",i="pt-page-moveFromLeft";break;case 40:u="pt-page-rotatePushTop",i="pt-page-moveFromBottom";break;case 41:u="pt-page-rotatePushBottom",i="pt-page-moveFromTop";break;case 42:u="pt-page-rotatePushLeft",i="pt-page-rotatePullRight pt-page-delay180";break;case 43:u="pt-page-rotatePushRight",i="pt-page-rotatePullLeft pt-page-delay180";break;case 44:u="pt-page-rotatePushTop",i="pt-page-rotatePullBottom pt-page-delay180";break;case 45:u="pt-page-rotatePushBottom",i="pt-page-rotatePullTop pt-page-delay180";break;case 46:u="pt-page-rotateFoldLeft",i="pt-page-moveFromRightFade";break;case 47:u="pt-page-rotateFoldRight",i="pt-page-moveFromLeftFade";break;case 48:u="pt-page-rotateFoldTop",i="pt-page-moveFromBottomFade";break;case 49:u="pt-page-rotateFoldBottom",i="pt-page-moveFromTopFade";break;case 50:u="pt-page-moveToRightFade",i="pt-page-rotateUnfoldLeft";break;case 51:u="pt-page-moveToLeftFade",i="pt-page-rotateUnfoldRight";break;
case 52:u="pt-page-moveToBottomFade",i="pt-page-rotateUnfoldTop";break;case 53:u="pt-page-moveToTopFade",i="pt-page-rotateUnfoldBottom";break;case 54:u="pt-page-rotateRoomLeftOut pt-page-ontop",i="pt-page-rotateRoomLeftIn";break;case 55:u="pt-page-rotateRoomRightOut pt-page-ontop",i="pt-page-rotateRoomRightIn";break;case 56:u="pt-page-rotateRoomTopOut pt-page-ontop",i="pt-page-rotateRoomTopIn";break;case 57:u="pt-page-rotateRoomBottomOut pt-page-ontop",i="pt-page-rotateRoomBottomIn";break;case 58:u="pt-page-rotateCubeLeftOut pt-page-ontop",i="pt-page-rotateCubeLeftIn";break;case 59:u="pt-page-rotateCubeRightOut pt-page-ontop",i="pt-page-rotateCubeRightIn";break;case 60:u="pt-page-rotateCubeTopOut pt-page-ontop",i="pt-page-rotateCubeTopIn";break;case 61:u="pt-page-rotateCubeBottomOut pt-page-ontop",i="pt-page-rotateCubeBottomIn";break;case 62:u="pt-page-rotateCarouselLeftOut pt-page-ontop",i="pt-page-rotateCarouselLeftIn";break;case 63:u="pt-page-rotateCarouselRightOut pt-page-ontop",i="pt-page-rotateCarouselRightIn";break;case 64:u="pt-page-rotateCarouselTopOut pt-page-ontop",i="pt-page-rotateCarouselTopIn";break;case 65:u="pt-page-rotateCarouselBottomOut pt-page-ontop",i="pt-page-rotateCarouselBottomIn";break;case 66:u="pt-page-rotateSidesOut",i="pt-page-rotateSidesIn pt-page-delay200";break;case 67:u="pt-page-rotateSlideOut",i="pt-page-rotateSlideIn"}}var i="",u="",c=o.bzPageTransition.split(",");t.$on("$stateChangeSuccess",function(a,o,s,d,p){var l=$(".mainView");if(n.loadCounter>1){if(is.desktop()){var h=0,g=0;if(o.name===d.name)r(0),l.eq(0).addClass(i),l.eq(1).addClass(u);else{for(var f=0;f<settingJs.pageTransitionSequence.length;f++)settingJs.pageTransitionSequence[f].stateName===d.name&&(h=f),settingJs.pageTransitionSequence[f].stateName===o.name&&(g=f);l.removeClass(i+" "+u),h<g&&(r(parseInt(c[0])),l.eq(0).addClass(i),l.eq(1).addClass(u)),h>g&&(r(parseInt(c[1])),l.eq(0).addClass(i),l.eq(1).addClass(u))}}e.on("enter",l.eq(0),function(e,n){"close"===n&&t.$broadcast("bz:pageTransitionCompleted","")})}else r(0),l.eq(0).addClass(i),l.eq(1).addClass(u)})}}}function H(e){return{restrict:"A",link:function(e,n,t,a){n.timepicker()}}}function T(){return{restrict:"A",require:"?ngModel",link:function(e,n,t,a){function o(){var e=n.val(),t=moment(e,"DD/MM/YYYY").toDate();a.$setViewValue(t)}a&&(a.$render=function(){if(a.$viewValue){var e=moment(a.$viewValue).format("DD/MM/YYYY");n.val(e||"")}},n.on("blur keyup change",function(){e.$evalAsync(o)}),o(),n.datepicker({dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0,beforeShow:function(){setTimeout(function(){$(".ui-datepicker").css("z-index",1050)},0)},onSelect:function(n,t){e.$evalAsync(o)}}))}}}function b(e){return{restrict:"A",link:function(e,n,t,a){n.datetimepicker({dateFormat:"dd/mm/yy",timeFormat:"HH:mm:ss",changeMonth:!0,changeYear:!0,showTime:!1,beforeShow:function(){setTimeout(function(){$(".ui-datepicker").css("z-index",1050)},0)}})}}}function C(e){return{restrict:"A",require:"?ngModel",link:function(e,n,t,a){var o=n.find("#dpFrom"),r=n.find("#dpTo");console.log(o),o.datetimepicker({dateFormat:"dd/mm/yy",timeFormat:"HH:mm:ss",changeMonth:!0,changeYear:!0,beforeShow:function(){setTimeout(function(){$(".ui-datepicker").css("z-index",1050)},0)},onClose:function(e,n){},onSelect:function(e){r.datetimepicker("option","minDate",o.datetimepicker("getDate")),o.datepicker("hide")}}),r.datetimepicker({dateFormat:"dd/mm/yy",timeFormat:"HH:mm:ss",changeMonth:!0,changeYear:!0,beforeShow:function(){setTimeout(function(){$(".ui-datepicker").css("z-index",1050)},0)},onClose:function(e,n){},onSelect:function(e){o.datetimepicker("option","maxDate",r.datetimepicker("getDate")),r.datepicker("hide")}})}}}function _(e){return{restrict:"A",link:function(n,t,a){function o(){document.addEventListener("fullscreenchange",p,!1),document.addEventListener("webkitfullscreenchange",p,!1),document.addEventListener("mozfullscreenchange",p,!1),document.addEventListener("MSFullscreenChange",p,!1),l.addEventListener("webkitendfullscreen",p,!1),t.on("ended",function(e){d()})}function r(){l.play()}function i(){l.pause()}function u(){l.pause(),l.currentTime=0}function c(e){l.currentTime=e}function s(e){l.volume=e}function d(){n.$emit(e.media.ENDED)}function p(){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;t?n.$emit(e.media.ENTER_FULLSCREEN):n.$emit(e.media.EXIT_FULLSCREEN)}var l=t[0];o(),n.$on(e.media.PLAY,function(){r()}),n.$on(e.media.PAUSE,function(){i()}),n.$on(e.media.STOP,function(){u()}),n.$on(e.media.SEEK,function(e,n){c(n)}),n.$on(e.media.VOLUME,function(e,n){s(n)}),n.$on(e.media.FULLSCREEN,function(e,n){console.log("request Fullscreen"),n?helperJs.enterFullScreen(l):helperJs.exitFullScreen()}),n.$on(e.media.ENTER_FULLSCREEN,function(e){console.log("enter Fullscreen")}),n.$on(e.media.EXIT_FULLSCREEN,function(e){console.log("exit Fullscreen")})}}}function w(){var e='<div class="loading-mask"><div id="bar-wave" class="bar-wave loading-style"><div class="bar"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div><div id="circle-spread" class="circle-spread loading-style"><div></div><div></div><div></div></div><div id="circle-line-spread" class="circle-line-spread loading-style"><div></div><div></div><div></div></div><div id="hoz-load-bar" class="hoz-load-bar loading-style"><div class="bar1"></div><div class="bar2"></div><div class="bar3"></div><div class="bar4"></div><div class="bar5"></div><div class="bar6"></div><div class="bar7"></div><div class="bar8"></div></div></div>';return{restrict:"E",templateUrl:e,replace:!0,link:function(e,n,t){n.find(t.loadingType).show()}}}function S(e){return{restrict:"A",link:function(n,t,a){function o(){$(r.selector).mCustomScrollbar(r)}var r={selector:t[0],theme:a.scrollbarTheme||"light",scrollbarPosition:a.scrollbarPosition||"inside",mouseWheel:{scrollAmount:20},scrollButtons:{enable:"true"===a.scrollbarArrow}};n.$on("bz:CustomScrollbarRender",function(){o()}),e(function(){o()},500)}}}function k(){return{restrict:"A",link:function(e,n,t){var a=t.bzRepeatCompleted.split(",");if(e.$last)for(var o=0;o<a.length;o++)e.$emit(a[o])}}}function P(e){return{restrict:"EA",replace:!0,scope:{pageParams:"=",pageState:"@"},template:'<div class="bz-pager"><a class="prev" ng-if="pageParams.page > 1" ui-sref="{{pageState}}({page: pageParams.page - 1 < 1 ? 1 : pageParams.page - 1})"><i class="fa fa-chevron-left"></i></a><a class="first" ng-if="pageParams.page > 3" ui-sref="{{pageState}}({page: 1})">1</a><a class="dot" ng-if="pageParams.page > 3">...</a><a class="num" ng-class="{active: page === pageParams.page}" ng-href="{{toHref(page)}}" ng-repeat="page in pageVisible">{{page}}</a><a class="dot" ng-if="pageParams.page < pageParams.pageCount - 2">...</a><a class="last" ng-if="pageParams.page < pageParams.pageCount - 2" ui-sref="{{pageState}}({page: pageParams.pageCount})">{{pageParams.pageCount}}</a><a class="next" ng-if="pageParams.page < pageParams.pageCount" ui-sref="{{pageState}}({page: (pageParams.page > pageParams.pageCount) ? pageParams.pageCount : (pageParams.page + 1)})"><i class="fa fa-chevron-right"></i></a></div>',link:function(n,t,a){function o(t){return e.href(n.pageState,{page:t})}function r(){n.pageVisible=[];for(var e=Math.ceil(Math.min(Math.max(1,n.pageParams.page-settingJs.pageVisibleCount/2),Math.max(1,n.pageParams.pageCount-settingJs.pageVisibleCount+1))),t=Math.ceil(Math.min(n.pageParams.pageCount,e+settingJs.pageVisibleCount-1)),a=e;a<=t;a++)n.pageVisible.push(a)}n.pageParams.page=parseInt(n.pageParams.page),n.toHref=o,r(),n.$on("bz:pageRefresh",function(e,t){n.pageParams.pageCount=t,r()})}}}function D(e){return{restrict:"A",link:function(n,t,a){is.desktop()&&(n.$on("$stateChangeSuccess",function(n,o,r,i,u){e(function(){t.find(a.bzParallax).parallax()},1e3)}),n.$on("$destroy",function(){t.find(a.bzParallax).parallax("disable")}))}}}function L(e){return{restrict:"A",link:function(n,t,a){function o(){t.find("a.fancybox").fancybox({beforeLoad:function(){e.$broadcast("bz:allowInputControls",!1)},beforeClose:function(){e.$broadcast("bz:allowInputControls",!0)}})}helperJs.isUndefinedNullEmpty(a.bzFancybox)?n.$on("bz:fancyBox",function(){o()}):"static"===a.bzFancybox&&o()}}}function A(){return{restrict:"A",scope:{bzInfinityScroll:"&",bzInfinityBottom:"@"},link:function(e,n,t){var a=$(window);e.$on("$stateChangeStart",function(e,n,t,o,r){o.name!==n.name&&a.off("scroll.infinity")}),a.on("scroll.infinity",helperJs.debounce(function(n){var t=isNaN(e.bzInfinityBottom)?$(e.bzInfinityBottom).position().top:parseInt(e.bzInfinityBottom);a.scrollTop()+a.height()>=$(document).height()-t&&e.bzInfinityScroll()},500))}}}function F(){return{restrict:"A",link:function(e,n,t){var a=jRespond([{label:"handheld",enter:0,exit:1023},{label:"desktop",enter:1024,exit:1e4}]);a.addFunc({breakpoint:"handheld",enter:function(){$("html").removeClass(t.bzFullframe)}}),a.addFunc({breakpoint:"desktop",enter:function(){$("html").addClass(t.bzFullframe)}})}}}function x(){return{require:"?ngModel",replace:!0,template:'<div class="bz-tag form-control"><ul><li ng-repeat="key in keys track by $index">{{key}}<i class="glyphicon glyphicon-remove" ng-click="remove($index)"></i></li></ul><input type="text" placeholder="Enter để thêm từ khoá" /><div class="clearfix"></div></div>',link:function(e,n,t,a){function o(n){e.keys.splice(n,1),a.$setViewValue(e.keys)}e.keys=[],e.remove=o,n.find("input").on("keypress",function(n){if(13===n.keyCode){var t=$.trim($(this).val());return e.keys.indexOf(t)===-1&&t.length>0&&(e.keys.push(t),console.log(e.keys),$(this).val(""),a.$setViewValue(e.keys)),e.$apply(),n.stopPropagation(),n.preventDefault(),!1}})}}}function B(){return{require:"ngModel",link:function(e,n,t,a){a.$parsers.push(function(e){return a.$setValidity("isdate",1==moment(e,["DD/MM/YYYY"],!0).isValid()||""==e),e})}}}function M(){return{restrict:"A",link:function(e,n,t){n.on("keypress",function(e){if("1"==t.allowDot){if(8!=e.which&&0!=e.which&&46!=e.which&&(e.which<48||e.which>57))return!1}else if(8!=e.which&&0!=e.which&&(e.which<48||e.which>57))return!1})}}}function z(e,n){return{replace:!0,templateUrl:"/assets/global/cropper/crop.html",link:function(e,t,a){function o(){console.log(123),t.find("#cropper-input-file").click()}function r(e){p.cropper("zoom",e)}function i(e){e?p.cropper("rotate",e):p.cropper("rotate",90)}function u(e){if(e)p.cropper("scale",e);else switch(l++,l){case 1:p.cropper("scale",-1,1);break;case 2:p.cropper("scale",1,-1);break;case 3:p.cropper("scale",-1,-1);break;case 4:p.cropper("scale",1,1),l=0}}function c(){p=h.cropper({aspectRatio:a.cropRatio,guides:!1}),e.loading=!1}function s(n){var t,a=window.URL||window.webkitURL;a&&(t=a.createObjectURL(n.files[0]),h.one("built.cropper",function(){a.revokeObjectURL(t)}).cropper("reset").cropper("replace",t),setTimeout(function(){e.$apply(function(){e.showButtonCrop=!0})}))}function d(){var n=p.cropper("getCroppedCanvas",{width:a.cropWidth,height:a.cropHeight}),t=n.toDataURL(a.cropMime);e.$root.$broadcast(a.cropEvent,{image:t})}var p=null,l=0,h=(t.find("#cropper-input-file"),t.find("#cropper-img"));e.showButtonCrop=!1,e.loading=!1,e.getImage=d,e.setImage=s,e.fileTrigger=o,e.zoom=r,e.rotate=i,e.scale=u,e.$on("$destroy",function(){p.cropper("destroy")}),a.cropImage?(e.loading=!0,h[0].crossOrigin="anonymous",h[0].src=a.cropImage,n(function(){e.showButtonCrop=!0,c()},1e3)):c()}}}function U(){return{restrict:"A",require:"?ngModel",link:function(e,n,t,a){a.$parsers.push(function(e){if(void 0==e)return"";var n=e.replace(/[^0-9]/g,"");return n!==e&&(a.$setViewValue(n),a.$render()),n})}}}a.$inject=["$timeout"],o.$inject=["$timeout","$window"],r.$inject=["$timeout"],s.$inject=["$parse"],d.$inject=["$state","$timeout"],g.$inject=["$resource"],m.$inject=["$parse"],v.$inject=["$animate","bzValueSvc"],H.$inject=["$timeout"],b.$inject=["$timeout"],C.$inject=["$timeout"],_.$inject=["bzEvents"],S.$inject=["$timeout"],P.$inject=["$state"],D.$inject=["$timeout"],L.$inject=["$rootScope"],e.$inject=["$timeout","$parse"],t.$inject=["$timeout"],z.$inject=["$state","$timeout"],angular.module("bzApp").directive("bzColorPicker",a).directive("autogrow",o).directive("ckEditor",r).directive("bzInputMask",i).directive("bzLoadingProgress",u).directive("bzPlaceholder",c).directive("bzFileModel",s).directive("bzInputControls",d).directive("bzValidPasswordMatch",p).directive("bzValidPassword",f).directive("bzPasswordStrength",l).directive("bzWordCount",h).directive("bzValidExist",g).directive("bzValidFileInput",m).directive("bzSubmit",y).directive("bzPageTransition",v).directive("bzTimePicker",H).directive("bzDatePicker",T).directive("bzDateTimePicker",b).directive("bzDateRangePicker",C).directive("bzMedia",_).directive("bzLoading",w).directive("bzCustomScrollbar",S).directive("bzRepeatCompleted",k).directive("bzPager",P).directive("bzParallax",D).directive("bzFancybox",L).directive("bzInfinityScroll",A).directive("bzFullframe",F).directive("bzTag",x).directive("bzInputNumber",M).directive("bzCheckDate",B).directive("iCheck",e).directive("atrDateTimePicker",n).directive("singleDateTimePicker",t).directive("bzCropper",z).directive("bzInputOnlyDigits",U)}(),function(){angular.module("bzApp").constant("VIETNAM_MAP",[{1:{name:"Thành phố Cần Thơ",districts:{66:"Huyện Cờ Đỏ",67:"Huyện Phong Điền",68:"Huyện Thới Lai",69:"Huyện Vĩnh Thạnh",70:"Quận Bình Thủy",71:"Quận Cái Răng",72:"Quận Ninh Kiều",73:"Quận Ô Môn",74:"Quận Thốt Nốt"}},2:{name:"Thành phố Đà Nẵng",districts:{76:"Huyện Hòa Vang",77:"Huyện Hoàng Sa",78:"Quận Cẩm Lệ",79:"Quận Hải Châu",80:"Quận Liên Chiểu",81:"Quận Ngũ Hành Sơn",82:"Quận Sơn Trà",83:"Quận Thanh Khê"}},3:{name:"Thành phố Hà Nội",districts:{85:"Huyện Ba Vì",86:"Huyện Chương Mỹ",87:"Huyện Đan Phượng",88:"Huyện Đông Anh",89:"Huyện Gia Lâm",90:"Huyện Hoài Đức",91:"Huyện Mê Linh",92:"Huyện Mỹ Đức",93:"Huyện Phú Xuyên",94:"Huyện Phúc Thọ",95:"Huyện Quốc Oai",96:"Huyện Sóc Sơn",97:"Huyện Thạch Thất",98:"Huyện Thanh Oai",99:"Huyện Thanh Trì",100:"Huyện Thường Tín",101:"Huyện Từ Liêm",102:"Huyện ứng Hòa",103:"Quận Ba Đình",104:"Quận Cầu Giấy",105:"Quận Đống Đa",106:"Quận Hà Đông",107:"Quận Hai Bà Trưng",108:"Quận Hoàn Kiếm",109:"Quận Hoàng Mai",110:"Quận Long Biên",111:"Quận Tây Hồ",112:"Quận Thanh Xuân",113:"Thị xã Sơn Tây"}},4:{name:"Thành phố Hải Phòng",districts:{115:"Huyện An Dương",116:"Huyện An Lão",117:"Huyện Bạch Long Vĩ",118:"Huyện Cát Hải",119:"Huyện Kiến Thụy",120:"Huyện Thủy Nguyên",121:"Huyện Tiên Lãng",122:"Huyện Vĩnh Bảo",123:"Quận Đồ Sơn",124:"Quận Dương Kinh",125:"Quận Hải An",126:"Quận Hồng Bàng",127:"Quận Kiến An",128:"Quận Lê Chân",129:"Quận Ngô Quyền"}},5:{name:"Thành phố Hồ Chí Minh",districts:{131:"Huyện Bình Chánh",132:"Huyện Cần Giờ",133:"Huyện Củ Chi",134:"Huyện Hóc Môn",135:"Huyện Nhà Bè",136:"Quận 1",137:"Quận 10",138:"Quận 11",139:"Quận 12",140:"Quận 2",141:"Quận 3",142:"Quận 4",143:"Quận 5",144:"Quận 6",145:"Quận 7",146:"Quận 8",147:"Quận 9",148:"Quận Bình Tân",149:"Quận Bình Thạnh",150:"Quận Gò Vấp",151:"Quận Phú Nhuận",152:"Quận Tân Bình",153:"Quận Tân Phú",154:"Quận Thủ Đức"}},6:{name:"Tỉnh An Giang",districts:{155:"Huyện An Phú",156:"Huyện Châu Phú",157:"Huyện Châu Thành",158:"Huyện Chợ Mới",159:"Huyện Phú Tân",160:"Huyện Thoại Sơn",161:"Huyện Tịnh Biên",162:"Huyện Tri Tôn",163:"Thành phố Long Xuyên",164:"Thị xã Châu Đốc",165:"Thị xã Tân Châu"}},7:{name:"Tỉnh Bà Rịa-Vũng Tàu",districts:{166:"Huyện Châu Đức",167:"Huyện Côn Đảo",168:"Huyện Đất Đỏ",169:"Huyện Long Điền",170:"Huyện Tân Thành",171:"Huyện Xuyên Mộc",172:"Thành phố Vũng Tàu",173:"Thị xã Bà Rịa"}},8:{name:"Tỉnh Bắc Giang",districts:{174:"Huyện Hiệp Hòa",175:"Huyện Lạng Giang",176:"Huyện Lục Nam",177:"Huyện Lục Ngạn",178:"Huyện Sơn Động",179:"Huyện Tân Yên",180:"Huyện Việt Yên",181:"Huyện Yên Dũng",182:"Huyện Yên Thế",183:"Thành phố Bắc Giang"}},9:{name:"Tỉnh Bắc Kạn",districts:{184:"Huyện Ba Bể",185:"Huyện Bạch Thông",186:"Huyện Chợ Đồn",187:"Huyện Chợ Mới",188:"Huyện Na Rì",189:"Huyện Ngân Sơn",190:"Huyện Pác Nặm",191:"Thị xã Bắc Kạn"}},10:{name:"Tỉnh Bạc Liêu",districts:{192:"Huyện Đông Hải",193:"Huyện Giá Rai",194:"Huyện Hòa Bình",195:"Huyện Hồng Dân",196:"Huyện Phước Long",197:"Huyện Vĩnh Lợi",198:"Thành Phố Bạc Liêu"}},11:{name:"Tỉnh Bắc Ninh",districts:{199:"Huyện Gia Bình",200:"Huyện Lương Tài",201:"Huyện Quế Võ",202:"Huyện Thuận Thành",203:"Huyện Tiên Du",204:"Huyện Yên Phong",205:"Thành phố Bắc Ninh",206:"Thị xã Từ Sơn"}},12:{name:"Tỉnh Bến Tre",districts:{207:"Huyện Ba Tri",208:"Huyện Bình Đại",209:"Huyện Châu Thành",210:"Huyện Chợ Lách",211:"Huyện Giồng Trôm",212:"Huyện Mỏ Cày Bắc",213:"Huyện Mỏ Cày Nam",214:"Huyện Thạnh Phú",215:"Thành phố Bến Tre"}},13:{name:"Tỉnh Bình Định",districts:{216:"Huyện An Lão",217:"Huyện An Nhơn",218:"Huyện Hoài  Ân",219:"Huyện Hoài Nhơn",220:"Huyện Phù Mỹ",221:"Huyện Phù cát",222:"Huyện Tây Sơn",223:"Huyện Tuy Phước",224:"Huyện Vân Canh",225:"Huyện Vĩnh Thạnh",226:"Thành phố Quy Nhơn"}},14:{name:"Tỉnh Bình Dương",districts:{227:"Huyện Bến Cát",228:"Huyện Dầu Tiếng",229:"Huyện Dĩ An",230:"Huyện Phú Giáo",231:"Huyện Tân Uyên",232:"Huyện Thuận An",233:"Thị xã Thủ Dầu Một"}},15:{name:"Tỉnh Bình Phước",districts:{234:"Huyện Bù Đăng",235:"Huyện Bù Đốp",236:"Huyện Bù Gia Mập",237:"Huyện Chơn Thành",238:"Huyện Đồng Phú",239:"Huyện Hớn Quản",240:"Huyện Lộc Ninh",241:"Thị xã Bình Long",242:"Thị xã Đồng Xoài",243:"Thị xã Phước Long"}},16:{name:"Tỉnh Bình Thuận",districts:{244:"Huyện  Đức Linh",245:"Huyện Bắc Bình",246:"Huyện Hàm Tân",247:"Huyện Hàm Thuận Bắc",248:"Huyện Hàm Thuận Nam",249:"Huyện Phú Qúi",250:"Huyện Tánh Linh",251:"Huyện Tuy Phong",252:"Thành phố Phan Thiết",253:"Thị xã La Gi"}},17:{name:"Tỉnh Cà Mau",districts:{254:"Huyện Cái Nước",255:"Huyện Đầm Dơi",256:"Huyện Năm Căn",257:"Huyện Ngọc Hiển",258:"Huyện Phú Tân",259:"Huyện Thới Bình",260:"Huyện Trần Văn Thời",261:"Huyện U Minh",262:"Thành phố Cà Mau"}},18:{name:"Tỉnh Cao Bằng",districts:{263:"Huyện Bảo Lạc",264:"Huyện Bảo Lâm",265:"Huyện Hạ Lang",266:"Huyện Hà Quảng",267:"Huyện Hòa An",268:"Huyện Nguyên Bình",269:"Huyện Phục Hòa",270:"Huyện Quảng Uyên",271:"Huyện Thạch An",272:"Huyện Thông Nông",273:"Huyện Trà Lĩnh",274:"Huyện Trùng Khánh",275:"Thị xã Cao Bằng"}},19:{name:"Tỉnh Đắk Lắk",districts:{276:"Huyện Buôn Đôn",277:"Huyện Cư Kuin",278:"Huyện Cư MGar",279:"Huyện Ea Kar",280:"Huyện Ea Súp",281:"Huyện EaHLeo",282:"Huyện Krông Ana",283:"Huyện Krông Bông",284:"Huyện Krông Búk",285:"Huyện Krông Năng",286:"Huyện Krông Pắc",287:"Huyện Lắk",288:"Huyện MDrắk",289:"Thành phố Buôn Ma Thuột",290:"Thị xã Buôn Hồ"}},20:{name:"Tỉnh Đắk Nông",districts:{291:"Huyện Cư Jút",292:"Huyện Đắk GLong",293:"Huyện Đắk Mil",294:"Huyện Đắk RLấp",295:"Huyện Đắk Song",296:"Huyện KRông Nô",297:"Huyện Tuy Đức",298:"Thị xã Gia Nghĩa"}},21:{name:"Tỉnh Điện Biên",districts:{299:"Huyện Điện Biên",300:"Huyện Điện Biên Đông",301:"Huyện Mường Chà",302:"Huyện Mương Nhé",303:"Huyện Mường ảng",304:"Huyện Tủa Chùa",305:"Huyện Tuần Giáo",306:"Thành phố Điện Biên phủ",307:"Thị xã Mường Lay"}},22:{name:"Tỉnh Đồng Nai",districts:{308:"Huyện Cẩm Mỹ",309:"Huyện Định Quán",310:"Huyện Long Thành",311:"Huyện Nhơn Trạch",312:"Huyện Tân Phú",313:"Huyện Thống Nhất",314:"Huyện Trảng Bom",315:"Huyện Vĩnh Cửu",316:"Huyện Xuân Lộc",317:"Thành phố Biên Hòa",318:"Thị xã Long Khánh"}},23:{name:"Tỉnh Đồng Tháp",districts:{319:"Huyện Cao Lãnh",320:"Huyện Châu Thành",321:"Huyện Hồng Ngự",322:"Huyện Lai Vung",323:"Huyện Lấp Vò",324:"Huyện Tam Nông",325:"Huyện Tân Hồng",326:"Huyện Thanh Bình",327:"Huyện Tháp Mười",328:"Thành phố Cao Lãnh",329:"Thị xã Hồng Ngự",330:"Thị xã Sa Đéc"}},24:{name:"Tỉnh Gia Lai",districts:{331:"Huyện Chư Păh",332:"Huyện Chư Pưh",333:"Huyện Chư Sê",334:"Huyện ChưPRông",335:"Huyện Đăk Đoa",336:"Huyện Đăk Pơ",337:"Huyện Đức Cơ",338:"Huyện Ia Grai",339:"Huyện Ia Pa",340:"Huyện KBang",341:"Huyện KBang",342:"Huyện Kông Chro",343:"Huyện Krông Pa",344:"Huyện Mang Yang",345:"Huyện Phú Thiện",346:"Thành phố Plei Ku",347:"Thị xã AYun Pa",348:"Thị xã An Khê"}},25:{name:"Tỉnh Hà Giang",districts:{349:"Huyện Bắc Mê",350:"Huyện Bắc Quang",351:"Huyện Đồng Văn",352:"Huyện Hoàng Su Phì",353:"Huyện Mèo Vạc",354:"Huyện Quản Bạ",355:"Huyện Quang Bình",356:"Huyện Vị Xuyên",357:"Huyện Xín Mần",358:"Huyện Yên Minh",359:"Thành Phố Hà Giang"}},26:{name:"Tỉnh Hà Nam",districts:{360:"Huyện Bình Lục",361:"Huyện Duy Tiên",362:"Huyện Kim Bảng",363:"Huyện Lý Nhân",364:"Huyện Thanh Liêm",365:"Thành phố Phủ Lý"}},27:{name:"Tỉnh Hà Tĩnh",districts:{366:"Huyện Cẩm Xuyên",367:"Huyện Can Lộc",368:"Huyện Đức Thọ",369:"Huyện Hương Khê",370:"Huyện Hương Sơn",371:"Huyện Kỳ Anh",372:"Huyện Lộc Hà",373:"Huyện Nghi Xuân",374:"Huyện Thạch Hà",375:"Huyện Vũ Quang",376:"Thành phố Hà Tĩnh",377:"Thị xã Hồng Lĩnh"}},28:{name:"Tỉnh Hải Dương",districts:{378:"Huyện Bình Giang",379:"Huyện Cẩm Giàng",380:"Huyện Gia Lộc",381:"Huyện Kim Thành",382:"Huyện Kinh Môn",383:"Huyện Nam Sách",384:"Huyện Ninh Giang",385:"Huyện Thanh Hà",386:"Huyện Thanh Miện",387:"Huyện Tứ Kỳ",388:"Thành phố Hải Dương",389:"Thị xã Chí Linh"}},29:{name:"Tỉnh Hậu Giang",districts:{390:"Huyện Châu Thành",391:"Huyện Châu Thành A",392:"Huyện Long Mỹ",393:"Huyện Phụng Hiệp",394:"Huyện Vị Thủy",395:"Thành Phố Vị Thanh",396:"Thị xã Ngã Bảy"}},30:{name:"Tỉnh Hòa Bình",districts:{397:"Huyện Cao Phong",398:"Huyện Đà Bắc",399:"Huyện Kim Bôi",400:"Huyện Kỳ Sơn",401:"Huyện Lạc Sơn",402:"Huyện Lạc Thủy",403:"Huyện Lương Sơn",404:"Huyện Mai Châu",405:"Huyện Tân Lạc",406:"Huyện Yên Thủy",407:"Thành phố Hòa Bình"}},31:{name:"Tỉnh Hưng Yên",districts:{408:"Huyện Ân Thi",409:"Huyện Khoái Châu",410:"Huyện Kim Động",411:"Huyện Mỹ Hào",412:"Huyện Phù Cừ",413:"Huyện Tiên Lữ",414:"Huyện Văn Giang",415:"Huyện Văn Lâm",416:"Huyện Yên Mỹ",417:"Thành phố Hưng Yên"}},32:{name:"Tỉnh Khánh Hòa",districts:{418:"Huyện Cam Lâm",419:"Huyện Diên Khánh",420:"Huyện Khánh Sơn",421:"Huyện Khánh Vĩnh",422:"Huyện Ninh Hòa",423:"Huyện Trường Sa",424:"Huyện Vạn Ninh",425:"Thành phố Nha Trang",426:"Thị xã Cam Ranh"}},33:{name:"Tỉnh Kiên Giang",districts:{427:"Huyện An Biên",428:"Huyện An Minh",429:"Huyện Châu Thành",430:"Huyện Giang Thành",431:"Huyện Giồng Riềng",432:"Huyện Gò Quao",433:"Huyện Hòn Đất",434:"Huyện Kiên Hải",435:"Huyện Kiên Lương",436:"Huyện Phú Quốc",437:"Huyện Tân Hiệp",438:"Huyện U Minh Thượng",439:"Huyện Vĩnh Thuận",440:"Thành phố Rạch Giá",441:"Thị xã Hà Tiên"}},34:{name:"Tỉnh Kon Tum",districts:{442:"Huyện Đắk Glei",443:"Huyện Đắk Hà",444:"Huyện Đắk Tô",445:"Huyện Kon Plông",446:"Huyện Kon Rẫy",447:"Huyện Ngọc Hồi",448:"Huyện Sa Thầy",449:"Huyện Tu Mơ Rông",450:"Thành phố Kon Tum"}},35:{name:"Tỉnh Lai Châu",districts:{451:"Huyện Mường Tè",452:"Huyện Phong Thổ",453:"Huyện Sìn Hồ",454:"Huyện Tam Đường",455:"Huyện Tân Uyên",456:"Huyện Than Uyên",457:"Thị xã Lai Châu"}},36:{name:"Tỉnh Lâm Đồng",districts:{458:"Huyện Bảo Lâm",459:"Huyện Cát Tiên",460:"Huyện Đạ Huoai",461:"Huyện Đạ Tẻh",462:"Huyện Đam Rông",463:"Huyện Di Linh",464:"Huyện Đơn Dương",465:"Huyện Đức Trọng",466:"Huyện Lạc Dương",467:"Huyện Lâm Hà",468:"Thành phố Bảo Lộc",469:"Thành phố Đà Lạt"}},37:{name:"Tỉnh Lạng Sơn",districts:{470:"Huyện Bắc Sơn",471:"Huyện Bình Gia",472:"Huyện Cao Lộc",473:"Huyện Chi Lăng",474:"Huyện Đình Lập",475:"Huyện Hữu Lũng",476:"Huyện Lộc Bình",477:"Huyện Tràng Định",478:"Huyện Văn Lãng",479:"Huyện Văn Quan",480:"Thành phố Lạng Sơn"}},38:{name:"Tỉnh Lào Cai",districts:{481:"Huyện Bắc Hà",482:"Huyện Bảo Thắng",483:"Huyện Bảo Yên",484:"Huyện Bát Xát",485:"Huyện Mường Khương",486:"Huyện Sa Pa",487:"Huyện Si Ma Cai",488:"Huyện Văn Bàn",489:"Thành phố Lào Cai"}},39:{name:"Tỉnh Long An",districts:{490:"Huyện Bến Lức",491:"Huyện Cần Đước",492:"Huyện Cần Giuộc",493:"Huyện Châu Thành",494:"Huyện Đức Hòa",495:"Huyện Đức Huệ",496:"Huyện Mộc Hóa",497:"Huyện Tân Hưng",498:"Huyện Tân Thạnh",499:"Huyện Tân Trụ",500:"Huyện Thạnh Hóa",501:"Huyện Thủ Thừa",502:"Huyện Vĩnh Hưng",503:"Thành phố Tân An"}},40:{name:"Tỉnh Nam Định",districts:{504:"Huyện Giao Thủy",505:"Huyện Hải Hậu",506:"Huyện Mỹ Lộc",507:"Huyện Nam Trực",508:"Huyện Nghĩa Hưng",509:"Huyện Trực Ninh",510:"Huyện Vụ Bản",511:"Huyện Xuân Trường",512:"Huyện ý Yên",513:"Thành phố Nam Định"}},41:{name:"Tỉnh Nghệ An",districts:{514:"Huyện Anh Sơn",515:"Huyện Con Cuông",516:"Huyện Diễn Châu",517:"Huyện Đô Lương",518:"Huyện Hưng Nguyên",519:"Huyện Kỳ Sơn",520:"Huyện Nam Đàn",521:"Huyện Nghi Lộc",522:"Huyện Nghĩa Đàn",523:"Huyện Quế Phong",524:"Huyện Quỳ Châu",525:"Huyện Quỳ Hợp",526:"Huyện Quỳnh Lưu",527:"Huyện Tân Kỳ",528:"Huyện Thanh Chương",529:"Huyện Tương Dương",530:"Huyện Yên Thành",531:"Thành phố Vinh",532:"Thị xã Cửa Lò",533:"Thị xã Thái Hòa"}},42:{name:"Tỉnh Ninh Bình",districts:{534:"Huyện Gia Viễn",535:"Huyện Hoa Lư",536:"Huyện Kim Sơn",537:"Huyện Nho Quan",538:"Huyện Yên Khánh",539:"Huyện Yên Mô",540:"Thành phố Ninh Bình",541:"Thị xã Tam Điệp"}},43:{name:"Tỉnh Ninh Thuận",districts:{542:"Huyên Bác ái",543:"Huyện Ninh Hải",544:"Huyện Ninh Phước",545:"Huyện Ninh Sơn",546:"Huyện Thuận Bắc",547:"Huyện Thuận Nam",548:"Thành phố Phan Rang-Tháp Chàm"}},44:{name:"Tỉnh Phú Thọ",districts:{549:"Huyện Cẩm Khê",550:"Huyện Đoan Hùng",551:"Huyện Hạ Hòa",552:"Huyện Lâm Thao",553:"Huyện Phù Ninh",554:"Huyện Tam Nông",555:"Huyện Tân Sơn",556:"Huyện Thanh Ba",557:"Huyện Thanh Sơn",558:"Huyện Thanh Thủy",559:"Huyện Yên Lập",560:"Thành phố Việt Trì",561:"Thị xã Phú Thọ"}},45:{name:"Tỉnh Phú Yên",districts:{562:"Huyện Đông Hòa",563:"Huyện Đồng Xuân",564:"Huyện Phú Hòa",565:"Huyện Sơn Hòa",566:"Huyện Sông Hinh",567:"Huyện Tây Hòa",568:"Huyện Tuy An",569:"Thành phố Tuy Hòa",570:"Thị xã Sông Cầu"}},46:{name:"Tỉnh Quảng Bình",districts:{571:"Huyện Bố Trạch",572:"Huyện Lệ Thủy",573:"Huyện MinhHoá",574:"Huyện Quảng Ninh",575:"Huyện Quảng Trạch",576:"Huyện Tuyên Hoá",577:"Thành phố Đồng Hới"}},47:{name:"Tỉnh Quảng Nam",districts:{578:"Huyện Bắc Trà My",579:"Huyện Đại Lộc",580:"Huyện Điện Bàn",581:"Huyện Đông Giang",582:"Huyện Duy Xuyên",583:"Huyện Hiệp Đức",584:"Huyện Nam Giang",585:"Huyện Nam Trà My",586:"Huyện Nông Sơn",587:"Huyện Núi Thành",588:"Huyện Phú Ninh",589:"Huyện Phước Sơn",590:"Huyện Quế Sơn",591:"Huyện Tây Giang",592:"Huyện Thăng Bình",593:"Huyện Tiên Phước",594:"Thành phố Hội An",595:"Thành phố Tam Kỳ"}},48:{name:"Tỉnh Quảng Ngãi",districts:{596:"Huyện Ba Tơ",597:"Huyện Bình Sơn",598:"Huyện Đức Phổ",599:"Huyện Lý sơn",600:"Huyện Minh Long",601:"Huyện Mộ Đức",602:"Huyện Nghĩa Hành",603:"Huyện Sơn Hà",604:"Huyện Sơn Tây",605:"Huyện Sơn Tịnh",606:"Huyện Tây Trà",607:"Huyện Trà Bồng",608:"Huyện Tư Nghĩa",609:"Thành phố Quảng Ngãi"}},49:{name:"Tỉnh Quảng Ninh",districts:{610:"Huyện Ba Chẽ",611:"Huyện Bình Liêu",612:"Huyện Cô Tô",613:"Huyện Đầm Hà",614:"Huyện Đông Triều",615:"Huyện Hải Hà",616:"Huyện Hoành Bồ",617:"Huyện Tiên Yên",618:"Huyện Vân Đồn",619:"Huyện Yên Hưng",620:"Thành phố Hạ Long",621:"Thành phố Móng Cái",622:"Thị xã Cẩm Phả",623:"Thị xã Uông Bí"}},50:{name:"Tỉnh Quảng Trị",districts:{624:"Huyện Cam Lộ",625:"Huyện Cồn Cỏ",626:"Huyện Đa Krông",627:"Huyện Gio Linh",628:"Huyện Hải Lăng",629:"Huyện Hướng Hóa",630:"Huyện Triệu Phong",631:"Huyện Vính Linh",632:"Thành phố Đông Hà",633:"Thị xã Quảng Trị"}},51:{name:"Tỉnh Sóc Trăng",districts:{634:"Huyện Châu Thành",635:"Huyện Cù Lao Dung",636:"Huyện Kế Sách",637:"Huyện Long Phú",638:"Huyện Mỹ Tú",639:"Huyện Mỹ Xuyên",640:"Huyện Ngã Năm",641:"Huyện Thạnh Trị",642:"Huyện Trần Đề",643:"Huyện Vĩnh Châu",644:"Thành phố Sóc Trăng"}},52:{name:"Tỉnh Sơn La",districts:{645:"Huyện Bắc Yên",646:"Huyện Mai Sơn",647:"Huyện Mộc Châu",648:"Huyện Mường La",649:"Huyện Phù Yên",650:"Huyện Quỳnh Nhai",651:"Huyện Sông Mã",652:"Huyện Sốp Cộp",653:"Huyện Thuận Châu",654:"Huyện Yên Châu",655:"Thành phố Sơn La"}},53:{name:"Tỉnh Tây Ninh",districts:{656:"Huyện Bến Cầu",657:"Huyện Châu Thành",658:"Huyện Dương Minh Châu",659:"Huyện Gò Dầu",660:"Huyện Hòa Thành",661:"Huyện Tân Biên",662:"Huyện Tân Châu",663:"Huyện Trảng Bàng",664:"Thị xã Tây Ninh"}},54:{name:"Tỉnh Thái Bình",districts:{665:"Huyện Đông Hưng",666:"Huyện Hưng Hà",667:"Huyện Kiến Xương",668:"Huyện Quỳnh Phụ",669:"Huyện Thái Thụy",670:"Huyện Tiền Hải",671:"Huyện Vũ Thư",672:"Thành phố Thái Bình"}},55:{name:"Tỉnh Thái Nguyên",districts:{673:"Huyện Đại Từ",674:"Huyện Định Hóa",675:"Huyện Đồng Hỷ",676:"Huyện Phổ Yên",677:"Huyện Phú Bình",678:"Huyện Phú Lương",679:"Huyện Võ Nhai",680:"Thành phố Thái Nguyên",681:"Thị xã Sông Công"}},56:{name:"Tỉnh Thanh Hóa",districts:{682:"Huyện Bá Thước",683:"Huyện Cẩm Thủy",684:"Huyện Đông Sơn",685:"Huyện Hà Trung",686:"Huyện Hậu Lộc",687:"Huyện Hoằng Hóa",688:"Huyện Lang Chánh",689:"Huyện Mường Lát",690:"Huyện Nga Sơn",691:"Huyện Ngọc Lặc",692:"Huyện Như Thanh",693:"Huyện Như Xuân",694:"Huyện Nông Cống",695:"Huyện Quan Hóa",696:"Huyện Quan Sơn",697:"Huyện Quảng Xương",698:"Huyện Thạch Thành",699:"Huyện Thiệu Hóa",700:"Huyện Thọ Xuân",701:"Huyện Thường Xuân",702:"Huyện Tĩnh Gia",703:"Huyện Triệu Sơn",704:"Huyện Vĩnh Lộc",705:"Huyện Yên Định",706:"Thành phố Thanh Hóa",707:"Thị xã Bỉm Sơn",708:"Thị xã Sầm Sơn"}},57:{name:"Tỉnh Thừa Thiên Huế",districts:{709:"Huyện A Lưới",710:"Huyện Hương Trà",711:"Huyện Nam Dông",712:"Huyện Phong Điền",713:"Huyện Phú Lộc",714:"Huyện Phú Vang",715:"Huyện Quảng Điền",716:"Thành phố Huế",717:"thị xã Hương Thủy"}},58:{name:"Tỉnh Tiền Giang",districts:{718:"Huyện Cái Bè",719:"Huyện Cai Lậy",720:"Huyện Châu Thành",721:"Huyện Chợ Gạo",722:"Huyện Gò Công Đông",723:"Huyện Gò Công Tây",724:"Huyện Tân Phú Đông",725:"Huyện Tân Phước",726:"Thành phố Mỹ Tho",727:"Thị xã Gò Công"}},59:{name:"Tỉnh Trà Vinh",districts:{728:"Huyện Càng Long",729:"Huyện Cầu Kè",730:"Huyện Cầu Ngang",731:"Huyện Châu Thành",732:"Huyện Duyên Hải",733:"Huyện Tiểu Cần",734:"Huyện Trà Cú",735:"Thành phố Trà Vinh"}},60:{name:"Tỉnh Tuyên Quang",districts:{736:"Huyện Chiêm Hóa",737:"Huyện Hàm Yên",738:"Huyện Na hang",739:"Huyện Sơn Dương",740:"Huyện Yên Sơn",741:"Thành phố Tuyên Quang"}},61:{name:"Tỉnh Vĩnh Long",districts:{742:"Huyện Bình Minh",743:"Huyện Bình Tân",744:"Huyện Long Hồ",745:"Huyện Mang Thít",746:"Huyện Tam Bình",747:"Huyện Trà Ôn",748:"Huyện Vũng Liêm",749:"Thành phố Vĩnh Long"}},62:{name:"Tỉnh Vĩnh Phúc",districts:{750:"Huyện Bình Xuyên",751:"Huyện Lập Thạch",752:"Huyện Sông Lô",753:"Huyện Tam Đảo",754:"Huyện Tam Dương",755:"Huyện Vĩnh Tường",756:"Huyện Yên Lạc",757:"Thành phố Vĩnh Yên",758:"Thị xã Phúc Yên"}},63:{name:"Tỉnh Yên Bái",districts:{759:"Huyện Lục Yên",760:"Huyện Mù Cang Chải",761:"Huyện Trạm Tấu",762:"Huyện Trấn Yên",763:"Huyện Văn Chấn",764:"Huyện Văn Yên",765:"Huyện Yên Bình",766:"Thành phố Yên Bái",767:"Thị xã Nghĩa Lộ"}}}])}(),function(){function e(e,n){n.theme="bs3"}e.$inject=["authSvc","editableOptions"],Application.registerModule("bzUser"),angular.module("bzUser",["xeditable"]).run(e)}(),function(){function e(e){}e.$inject=["authSvc"],Application.registerModule("bzProduct"),angular.module("bzProduct",[]).run(e)}(),function(){function e(e){}e.$inject=["authSvc"],Application.registerModule("bzWebOrder"),angular.module("bzWebOrder",[]).run(e)}(),function(){function e(){}Application.registerModule("bsLearning"),angular.module("bsLearning",[]).run(e)}(),function(){function e(e){}e.$inject=["authSvc"],Application.registerModule("bzWebHome"),angular.module("bzWebHome",[]).run(e)}(),function(){function e(e){}e.$inject=["authSvc"],Application.registerModule("bsDictionary"),angular.module("bsDictionary",["angucomplete-alt"]).run(e)}(),function(){function e(e){}e.$inject=["authSvc"],Application.registerModule("bzWebBlog"),angular.module("bzWebBlog",[]).run(e)}(),function(){function e(e,n){n.theme="bs3"}e.$inject=["authSvc","editableOptions"],Application.registerModule("bzAuth"),angular.module("bzAuth",["xeditable"]).run(e)}(),function(){Application.registerModule("bsLearning"),angular.module("bsLearning",[]).constant("listTypesWord",[{name:"Danh từ",value:"noun"},{name:"Đông từ",value:"verb"},{name:"Tính từ",value:"adjective"},{name:"Trạng tư",value:"adverb"},{name:"Đại từ nhân xưng",value:"pronoun"}])}(),
function(){function e(e,n){return n.api(e.settings.services.admin+"/:method/:id",{method:"@method",id:"@id"})}function n(e,n){return n.api(e.settings.services.apiUrl+"/:method/:id",{method:"@method",id:"@id"})}function t(e,n,t,a){function o(e,n){var t=new a(e);return t.$save({method:"user"})}function r(e,n){var t=new a(e);return t.$update({method:"user",id:n})}return{create:o,update:r}}function a(e,n,t,a){function o(e,n){var t=new a(e);return t.$update({method:"user-favorite-product",id:n})}return{updateFavoriteProduct:o}}t.$inject=["$q","$window","bzResourceSvc","userFac"],e.$inject=["$window","bzResourceSvc"],n.$inject=["$window","bzResourceSvc"],a.$inject=["$q","$window","bzResourceSvc","userFacApi"],angular.module("bzUser").service("userSvc",t).service("userFac",e).service("userFacApi",n).service("userSvcApi",a)}(),function(){function e(e,n){return n.api(e.settings.services.webUrl+"/:method/:id",{method:"@method",id:"@id"})}function n(e,n,t,a){function o(e,n){var t=new a;return t.$get({method:"san-pham",id:e+"-"+n,api:!0})}return{detailProduct:o}}function t(e,n,t,a,o,r){function i(e,a){var o="/san-pham/"+e+"-"+a;if(helperJsCustom.GA("send","pageview",o),$(window).width()>768){n.history.pushState(null,"title",o);var r=t.open({animation:!0,templateUrl:settings.services.webUrl+"/modules/web-product/view/client/popup/detail-product/view.html",controller:"popupProductDetail",controllerAs:"vmPopProDe",resolve:{product:function(){return angular.copy({slug:e,id:a})}}});r.result.then(function(e){n.history.back()},function(){n.history.back()})}else window.location.href=settings.services.webUrl+o}function u(e,n){r.update("add-product",{product:e,quantity:1}).then(function(e){n(e)})["catch"](function(e){console.log(e)})}function c(e,n,t){var a=n-1;r.update("set-quantity",{product:e,quantity:a}).then(function(e){t(e)})["catch"](function(e){console.log(e)})}function s(e,n){for(var t=0;t<e.length;t++){var a=e[t];if(a.id_product==n)return a}}function d(e,n){var t=n.split("/");if(t.length>1){var a=settingJs.configs.uploadDirectory.media_old_product.slice(0,-1);return a+n}return e+n}function p(e){var n=new RegExp('{{media url="',"g"),t=new RegExp('"}}',"g"),o=new RegExp("//mhv-live.bizzon.com.vn","g");return e=e.replace(n,settings.services.webUrl+settingJs.configs.uploadDirectory.media_old).replace(t,"").replace(o,settings.services.webUrl),a.trustAsHtml(e)}function l(n){if(n){var t=n.price;n.promotion&&n.promotion.status&&("PC"==n.promotion.type?t=t*(100-n.promotion.value)/100:t-=n.promotion.value),e.list_track_fpq.indexOf(n._id)==-1&&(e.list_track_fpq.push(n._id),fbq("track","AddToCart",{value:t,currency:"VND"}))}}return{popupDetailPro:i,addToCart:u,decreaseCart:c,findByIdProduct:s,checkImgOld:d,fixImgProductDetail:p,addToCartGA:l}}e.$inject=["$window","bzResourceSvc"],n.$inject=["$q","$window","bzResourceSvc","webProductFac"],t.$inject=["$rootScope","$window","$uibModal","$sce","webProductSvc","orderApiSvc"],angular.module("bzProduct").factory("webProductFac",e).service("webProductSvc",n).service("apiProductSvc",t)}(),function(){function e(e,n){return n.api(e.settings.services.apiUrl+"/order/:method/:id_product/:quantity",{method:"@method",id_product:"@id_product",quantity:"@quantity"})}function n(e,n,t,a){function o(e){var n=new a(e);return n.$save({})}function r(e,n){var t=new a(e);return t.$save({method:"apply-coupon",id_product:n})}function i(){var e=new a;return e.$get({method:"list-shiping-fee"})}function u(){var e=new a;return e.$get({method:"shiping-address-user"})}return{sendOrder:o,checkCoupon:r,getShippingFee:i,getShippingAddressUser:u}}n.$inject=["$q","$window","bzResourceSvc","orderWebFac"],e.$inject=["$window","bzResourceSvc"],angular.module("bzWebOrder").service("orderWebSvc",n).factory("orderWebFac",e)}(),function(){function e(e,n){return n.api(e.settings.services.apiUrl+"/:method/:id",{method:"@method",id:"@id"})}function n(e,n,t){function a(){var e=new t;return e.$get({method:"search-list"})}function o(){var e=new t;return e.$get({method:"product-list"})}function r(e){e.method="add-search";var n=new t(e);return n.$get(e)}function i(e){e.method="search";var n=new t;return n.$get(e)}return{searchList:a,searchProduct:o,addSearch:r,search:i}}n.$inject=["$q","$window","WebSearchFac"],e.$inject=["$window","bzResourceSvc"],angular.module("bzWebHome").service("WebSearchSvc",n).factory("WebSearchFac",e)}(),function(){function e(e,n){return n.api(e.settings.services.webUrl+"/dat-hang/:method/:id_product/:quantity",{method:"@method",id_product:"@id_product",quantity:"@quantity"})}function n(e,n,t,a){return{}}n.$inject=["$q","$window","bzResourceSvc","WebHomeFac"],e.$inject=["$window","bzResourceSvc"],angular.module("bzWebHome").service("WebHomeSvc",n).factory("WebHomeFac",e)}(),function(){function e(e,n){return n.api(e.settings.services.webUrl+"/:method/:id",{method:"@method",id:"@id"})}function n(e,n,t,a){function o(e){var n=new a(e);return n.$get({method:"blogs"})}function r(e){var n=new a(e);return n.$get({method:"tags-blog"})}return{getAll:o,getAllTag:r}}n.$inject=["$q","$window","bzResourceSvc","blogWebFac"],e.$inject=["$window","bzResourceSvc"],angular.module("bzWebBlog").service("blogWebSvc",n).factory("blogWebFac",e)}(),function(){function e(e,n,t,a,o,r,i,u,c,s){function d(e){if(p.submitted=!0,p.lockForm=!0,e){delete p.user.deletedAt,delete p.user.__v,delete p.user.password_token,delete p.user.created,delete p.user.provider,delete p.user.activeToken,delete p.user.favorite_product,delete p.user.dob,delete p.user.password,delete p.user.vocative;var n=p.user,t=0;n.customer.shipping_address.find(function(e,n){return t=n,e._id==s.shipping_address._id});if(console.log("test",n.customer.shipping_address[t],p.formData),n.customer.shipping_address[t]={name:sanitizeHtml(p.formData.name),phone:sanitizeHtml(p.formData.phone),address_detail:sanitizeHtml(p.formData.address_detail),id_shipping_fee:p.formData.id_shipping_fee._id},console.log("test1",n.customer.shipping_address[t]),""==n.customer.shipping_address[t].name||""==n.customer.shipping_address[t].phone||""==n.customer.shipping_address[t].address_detail)return o.toastr({type:"error",data:{title:"Lỗi",message:"Dữ liệu nhập vào bị lỗi !!"}}),void(p.lockForm=!1);u.update(n,n._id).then(function(e){o.toastr({type:"success",data:{title:"Địa chỉ giao hàng",message:"Cập nhật thành công"}}),p.lockForm=!1,r.close(e)})["catch"](function(e){o.toastr({type:"error",data:{title:"Địa chỉ giao hàng",message:e.data.message}}),p.lockForm=!1})}else p.submitted=!0,p.lockForm=!1}var p=this;p.formData={},p.submitted=!1,p.lockForm=!1,p.user=a.data.user,p.user.roles=a.user.scope,p.formData=s.shipping_address,p.updateAddressShipping=d,p.districts=a.data.shippingfee}e.$inject=["$scope","$rootScope","$state","$window","$bzPopup","$uibModalInstance","bzResourceSvc","authSvc","userSvc","data"],angular.module("bzUser").controller("popEditShippingAddressCtrl",e)}(),function(){function e(e,n,t,a,o,r,i,u,c){function s(e){if(d.submitted=!0,d.lockForm=!0,e){var n={name:sanitizeHtml(d.formData.name),phone:sanitizeHtml(d.formData.phone),address_detail:sanitizeHtml(d.formData.address),id_shipping_fee:d.formData.district};if(""==n.name||""==n.phone||""==n.address_detail)return o.toastr({type:"error",data:{title:"Lỗi",message:"Dữ liệu nhập vào bị lỗi !!"}}),void(d.lockForm=!1);var t=d.user;delete t.__v,delete t.vocative,delete t.password_token,delete t.created,delete t.provider,delete t.activeToken,delete t.favorite_product,delete t.dob,delete t.password,t.customer.shipping_address.push(n),u.update(t,d.user._id).then(function(e){o.toastr({type:"success",data:{title:"Địa chỉ",message:"Thêm thành công"}}),d.lockForm=!1,r.close(e)})["catch"](function(e){o.toastr({type:"error",data:{title:"Thất bại",message:e.data.message}}),d.lockForm=!1})}else d.submitted=!0,d.lockForm=!1}var d=this;d.formData={},d.submitted=!1,d.lockForm=!1,d.user=a.data.user,d.districts=a.data.shippingfee,d.user.roles=a.user.scope,d.addShippingAddress=s}e.$inject=["$scope","$rootScope","$state","$window","$bzPopup","$uibModalInstance","bzResourceSvc","authSvc","userSvc"],angular.module("bzUser").controller("popAddShippingAddressCtrl",e)}(),function(){function e(e,n,t,a,o,r,i,u,c,s,d,p){function l(){i.detailProduct(u.slug,u.id).then(function(e){w.data=e.data,e.check_slug?(g(),t(function(){angular.element("#pop-detail .fancybox").fancybox({prevEffect:"none",nextEffect:"none"}),w.slickSec=!0,angular.element(".col-xs-12.col-left .row").removeAttr("style"),angular.element(".col-xs-12.col-left .row.text-center").addClass("hidden");var e=angular.element("#pop-detail #text-detail").height();e>350&&(w.showDetailContent=!0,w.detailContent="hideContent",w.detailContentStyle={overflow:"hidden","max-height":"350px"}),angular.element("#pop-detail .facebook-section").html('<div class="fb-like" data-href="'+a.location.href+'" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true" style="margin-left: 50px;"></div>'),FB.XFBML.parse(),w.detail_infor=$("#pop-detail #text-detail")[0].innerHTML},100),w.doneLoad=!0):(console.log(window.location.href),o.toastr({type:"error",data:{title:"Lỗi",message:"Có lỗi. Hãy thử lại"}}),r.close())})}function h(e,n){r.close(),t(function(){d.popupDetailPro(e,n,!0)},50)}function g(){if(n.Cart.items){try{w.data.product.cart=n.Cart.items.find(function(e){return w.data.product._id==e.id_product}),w.data.product.relative_product_list&&w.data.product.relative_product_list.forEach(function(e){e.cart=n.Cart.items.find(function(n){return e._id==n.id_product})}),w.data.list_pro_month&&w.data.list_pro_month.forEach(function(e){e.cart=n.Cart.items.find(function(n){return e.product._id==n.id_product})})}catch(e){if(w.data.product.cart=d.findByIdProduct(n.Cart.items,w.data.product._id),w.data.product.relative_product_list)for(var t=0;t<w.data.product.relative_product_list.length;t++){var a=w.data.product.relative_product_list[t];a&&(w.data.product.relative_product_list[t].cart=_(a._id))}if(w.data.list_pro_month)for(var t=0;t<w.data.list_pro_month.length;t++){var a=w.data.list_pro_month[t];a&&(w.data.list_pro_month[t].cart=_(a.product._id))}}w.allowAddCart=!0}}function f(e){w.allowAddCart&&(w.allowAddCart=!1,d.addToCart(e,function(e){g()}))}function m(e,n){d.decreaseCart(e,n,function(e){g()})}function y(){w.data.user.favorite_product.push(w.data.product._id),s.updateFavoriteProduct(w.data.user,w.data.user._id).then(function(e){})["catch"](function(e){console.log(e),o.toastr({type:"error",data:{title:"Lỗi",message:"Có lỗi. Hãy thử lại"}});var n=w.data.user.favorite_product.indexOf(w.data.product._id);n!=-1&&w.data.user.favorite_product.splice(n,1)})}function v(){var e=w.data.user.favorite_product.indexOf(w.data.product._id);w.data.user.favorite_product.splice(e,1),s.updateFavoriteProduct(w.data.user,w.data.user._id).then(function(e){})["catch"](function(n){console.log(n),o.toastr({type:"error",data:{title:"Lỗi",message:"Có lỗi. Hãy thử lại"}}),w.data.user.favorite_product.push(w.data.product._id),e!=-1&&w.data.user.favorite_product.splice(e,1)})}function H(){r.close()}function T(e){return!e||(e=moment(e),moment().isBefore(e))}function b(){p.popLogin()}function C(){"hideContent"==w.detailContent?(w.detailContent="showContent",w.detailContentStyle={"max-height":"auto"}):($("#pop-detail #text-detail").html(w.detail_infor),w.detailContent="hideContent",w.detailContentStyle={overflow:"hidden","max-height":"350px"})}function _(e){var t;try{t=n.Cart.items.find(function(n){return n.id_product==e})}catch(a){t=d.findByIdProduct(n.Cart.items,e)}return t}var w=e;w.settings=a.settings,w.$on("Cart:getCart",g),w.allowAddCart=!0,w.showDetailContent=!1,w.imagesDirectory=settingJs.configs.uploadDirectory.thumb_product||"/files/thumb_image/product_image/",w.imagesProductDirectory=settingJs.configs.uploadDirectory.product||"/files/product_image/",w.popDetPro=h,w.addToCart=f,w.decreaseCart=m,w.addFavoriteProduct=y,w.removeFavoriteProduct=v,w.close=H,w.init=l,w.checkDueDate=T,w.login=b,w.showDetail=C,w.checkImgOld=d.checkImgOld,w.addToCartGA=d.addToCartGA,w.fixImgProductDetail=d.fixImgProductDetail,w.slickOption={infinite:!1,speed:300,slidesToShow:4,slidesToScroll:4,responsive:[{breakpoint:992,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:641,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:481,settings:{slidesToShow:2,slidesToScroll:2}}]},w.slickOptionViewImage={slidesToShow:1,slidesToScroll:1,dots:!1,arrows:!1,fade:!0,asNavFor:".list-image",responsive:[{breakpoint:1024,settings:{dots:!0,vertical:!1}}]},w.slickOptionListImage={slidesToShow:5,slidesToScroll:1,arrows:!0,vertical:!0,focusOnSelect:!0,asNavFor:".view-image",autoplaySpeed:5e3,responsive:[{breakpoint:1200,settings:{slidesToShow:4}}]}}e.$inject=["$scope","$rootScope","$timeout","$window","$bzPopup","$uibModalInstance","webProductSvc","product","orderApiSvc","userSvcApi","apiProductSvc","authSvc"],angular.module("bzProduct").controller("popupProductDetail",e)}(),function(){function e(e,n,t,a,o,r,i,u,c){function s(){var e=c.getInfoUser();e&&(y.formData.name=e.name||"",y.formData.phone=e.phone||"",y.formData.cfphone=e.phone||"")}function d(e){y.submitted=!0,y.lockForm=!0,e?(y.formData.cfpassword=y.formData.password,i.register(y.formData).then(function(e){fbq("track","CompleteRegistration"),c.removeInfoUser(),o.toastr({type:"success",data:{title:"Thành công",message:"Đăng ký thành công"}}),u.close(),h(e)})["catch"](function(e){y.err=e.data.message,y.lockForm=!1,"email"!=y.err&&"phone"!=y.err&&o.toastr({type:"error",data:{title:"Lỗi",message:"Dữ liệu nhập vào bị lỗi !!"}})})):(y.submitted=!0,y.lockForm=!1)}function p(){y.err=null}function l(e){return y.formData.cfphone!=y.formData.phone&&(e=!1,!0)}function h(e){console.log(e);var n={phone:e.phone,password:"123",isRegister:!0};i.siteLogin(n,function(e){a.location.href="/"})}function g(){i.getFacebook().then(function(e){e.isRegister=!0,e.error?o.toastr({type:"error",data:{title:"Đăng ký facebook",message:""+e.error}}):(f("facebook",e),i.facebookLogin(e,function(e){fbq("track","CompleteRegistration"),c.removeInfoUser(),a.location.href="/"},function(e){o.toastr({type:"error",data:{title:"Đăng ký facebook",message:e.data.message}})}))})}function f(e,n){y.social={type:e,id:n.id,name:n.name,email:n.email,profile_picture:n.picture+"?sz=200"},"facebook"==e&&(y.social.profile_picture="https://graph.facebook.com/v2.5/"+n.id+"/picture?width=200&height=200")}function m(){u.close(),i.popLogin()}var y=this;y.formData={},y.submitted=!1,y.lockForm=!1,y.register=d,y.login=h,y.popLogin=m,y.loginFacebook=g,y.checkInput=p,y.checkPhoneMatch=l,y.getInfoLocalStorage=s,s()}e.$inject=["$scope","$rootScope","$state","$window","$bzPopup","$uibModal","authSvc","$uibModalInstance","bzUtilsSvc"],angular.module("bzAuth").controller("popRegisterCtrl",e)}(),function(){function e(e,n,t,a,o,r,i,u,c){function s(){var e=c.getInfoUser();e&&(m.formData.phone=e.phone||"")}function d(e){m.submitted=!0,m.lockForm=!0,e?u.siteLogin(m.formData,function(e){c.removeInfoUser(),i.close()},function(e){m.err=e.data.message,m.lockForm=!1}):(m.submitted=!0,m.lockForm=!1)}function p(){u.getFacebook().then(function(e){e.error?(190==e.error.code?m.loginFacebook():o.toastr({type:"error",data:{title:"Đăng nhập facebook",message:""+e.error}}),m.lockForm=!1):(l("facebook",e),m.lockForm=!0,u.facebookLogin(e,function(e){i.close(),m.lockForm=!1},function(e){o.toastr({type:"error",data:{title:"Đăng nhập facebook",message:e.data.message}}),m.lockForm=!1}))})}function l(e,n){m.social={type:e,id:n.id,name:n.name,email:n.email,profile_picture:n.picture+"?sz=200"},"facebook"==e&&(m.social.profile_picture="https://graph.facebook.com/v2.5/"+n.id+"/picture?width=200&height=200")}function h(){var e={showPopup:!0};i.close(e),u.popForgotPass()}function g(){var e={showPopup:!0};i.close(e),u.popRegister()}function f(){m.err=null}var m=this;m.formData={},m.submitted=!1,m.lockForm=!1,m.login=d,m.loginFacebook=p,m.popForgotPass=h,m.popRegister=g,m.checkInput=f,m.getInfoLocalStorage=s,s()}e.$inject=["$scope","$rootScope","$state","$window","$bzPopup","$uibModal","$uibModalInstance","authSvc","bzUtilsSvc"],angular.module("bzAuth").controller("popLoginCtrl",e)}(),function(){function e(e,n,t,a,o,r,i){function u(){s.err=null}function c(e){s.submitted=!0,s.lockForm=!0,e?i.forgotPassword(s.formData).then(function(e){o.toastr({type:"success",data:{title:"Thành công",message:"Gửi mail thành công"}}),r.close()})["catch"](function(e){s.err=e.data.message,s.lockForm=!1}):(s.submitted=!0,s.lockForm=!1)}var s=this;s.formData={},s.submitted=!1,s.lockForm=!1,s.forgotPass=c,s.checkInput=u}e.$inject=["$scope","$rootScope","$state","$window","$bzPopup","$uibModalInstance","authSvc"],angular.module("bzAuth").controller("popForgotPassCtrl",e)}(),function(){function e(e,n,t,a,o,r,i){function u(n){console.log(123),e.submitted=!0,e.lockForm=!0,n?i.postChangePass(e.formData).then(function(e){o.toastr({type:"success",data:{title:"Thành công",message:"Đổi mật khẩu thành công"}}),r.close(),i.siteLogout()})["catch"](function(n){o.toastr({type:"error",data:{title:"Lỗi",message:n.data.message}}),e.lockForm=!1}):(e.submitted=!0,e.lockForm=!1)}e.formData={},e.submitted=!1,e.lockForm=!1,e.changePass=u}e.$inject=["$scope","$rootScope","$state","$window","$bzPopup","$uibModalInstance","authSvc"],angular.module("bzAuth").controller("popChangePassCtrl",e)}(),function(){function e(e,n,t,a,o,r,i,u,c,s){var d=this;d.arraysChart=["a","b","c","d","e","f","g","h","i","j","l","k","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],d.userFolder=a.userFolder,d.menuActive="recognition",console.log(d.userFolder)}e.$inject=["$scope","$rootScope","$state","$window","$bzPopup","$uibModal","bzResourceSvc","userSvc","authSvc","editableOptions"],angular.module("bzUser").controller("recognitionDataCtrl",e)}(),function(){function e(e,n,t,a,o,r,i,u,c,s){function d(e){return"PROCCESS"===e?"Đang xử lý":"FINISH"===e?"Hoàn thành":"CANCEL"===e?"Đã hủy":void 0}function p(e){"undefined"==typeof e.showAll?e.showAll=!0:e.showAll=!e.showAll}var l=this;l.menuActive="order",l.formData={},l.submitted=!1,l.lockForm=!1,l.data=a.data;jRespond([{label:"mobile",enter:0,exit:1023},{label:"desktop",enter:1024,exit:1e4}]);l.checkStatus=d,l.popupDetail=s.popupDetailPro,l.showAll=p,console.log(l.data),angular.element("#table").removeClass("hidden"),l.tableParams=new u({count:10},{counts:[],dataset:l.data})}e.$inject=["$scope","$rootScope","$state","$window","$bzPopup","$uibModal","bzResourceSvc","NgTableParams","userSvc","apiProductSvc"],angular.module("bzUser").controller("orderCtrl",e)}(),function(){function e(e,n,t,a,o,r,i,u,c,s,d,p){function l(){m.err=null}function h(e){var n=u.open({animation:!0,templateUrl:"/assets/global/cropper/view.html",controller:["$scope","$uibModalInstance",function(t,a){t.popupScope={image:m.avatarDir+m.formData.avatar,event:"crop:image",ratio:1,width:500,height:500},t.$on("crop:image",function(t,a){p.uploadBase64({directory:"avatar_image",image:a.image}).then(function(t){m.formData.avatar=t.name,n.close(),g(e,!0)})["catch"](function(e){i.toastr({type:"error",data:{title:"Lỗi",message:e.message}})})})}]})}function g(e,n){if(m.submitted=!0,m.lockForm=!0,e){if(delete m.formData.deletedAt,delete m.formData.__v,delete m.formData.password_token,delete m.formData.created,delete m.formData.provider,delete m.formData.provider_id,delete m.formData.activeToken,delete m.formData.favorite_product,delete m.formData.password,m.formData.dob){var t=m.formData.dob.toString().split("/");3==t.length?m.formData.dob=new Date(t[2],t[1]-1,t[0]):m.formData.dob=new Date(m.formData.dob)}d.update(m.formData,m.formData._id).then(function(e){n?(i.toastr({type:"success",data:{title:"Ảnh đại diện",message:"Cập nhập thành công"}}),setTimeout(function(){window.location.reload()},1e3)):(m.formData.name=e.name,m.formData.phone=e.phone,m.formData.email=e.email,m.formData.vocative=e.vocative,i.toastr({type:"success",data:{title:"Thông tin",message:"Cập nhập thành công"}})),m.lockForm=!1})["catch"](function(e){m.err=e.data.message,m.lockForm=!1,"email"!=m.err&&"phone"!=m.err&&i.toastr({type:"error",data:{title:"Lỗi",message:"Dữ liệu nhập vào bị lỗi !!"}}),console.log(e)})}else m.submitted=!0,m.lockForm=!1}function f(){u.open({animation:!0,templateUrl:settings.services.webUrl+"/modules/web-auth/view/client/popup/change-pass/view.html",controller:"popChangePassCtrl",controllerAs:"vmChangePass"})}var m=this;m.menuActive="info",m.avatarDir=settingJs.configs.uploadDirectory.avatar,m.submitted=!1,m.lockForm=!1,m.optionTimePicker={timePicker:!1,locale:{format:"DD/MM/YYYY"}},m.formData={},m.formData=o.data,m.formData.roles=o.user.scope,m.listClasses=[{name:"Lớp 1",value:"1"},{name:"Lớp 2",value:"2"},{name:"Lớp 3",value:"3"},{name:"Lớp 4",value:"4"},{name:"Lớp 5",value:"5"},{name:"Lớp 6",value:"6"},{name:"Lớp 7",value:"7"},{name:"Lớp 8",value:"8"},{name:"Lớp 9",value:"9"},{name:"Lớp 10",value:"10"},{name:"Lớp 11",value:"11"},{name:"Lớp 12",value:"12"},{name:"Khác",value:"khac"}],m.urlAvatar=settings.services.webUrl+m.avatarDir+m.formData.avatar,m.checkInput=l,m.editInfo=g,m.popChangePass=f,m.uploadAvatar=h,angular.element("#hide1").removeClass("hidden")}e.$inject=["$scope","$rootScope","$location","$state","$window","$filter","$bzPopup","$uibModal","bzResourceSvc","userSvc","authSvc","bzUpload"],angular.module("bzUser").controller("userInfoCtrl",e)}(),function(){function e(e,n,t,a,o,r,i,u,c,s){function d(e,n){a.history.pushState(null,"title","/san-pham/"+e+"-"+n);var t=r.open({animation:!0,templateUrl:settings.services.webUrl+"/modules/web-product/view/client/popup/detail-product/view.html",controller:"popupProductDetail",controllerAs:"vmPopProDe",resolve:{product:function(){return angular.copy({slug:e,id:n})}}});t.result.then(function(e){a.history.back()},function(){a.history.back()})}function p(e){if(n.Cart){try{e.cart=n.Cart.items.find(function(n){return e._id==n.id_product})}catch(t){e.cart=s.findByIdProduct(n.Cart.items,e._id)}f.allowAddCart=!0}return e.cart}function l(e){f.allowAddCart&&(f.allowAddCart=!1,s.addToCart(e,function(e){p(e)}))}function h(e,n){s.decreaseCart(e,n,function(e){p(e)})}function g(e){return!e||(e=moment(e),moment().isBefore(e))}var f=this;f.menuActive="favorite-product",f.formData={},f.imagesDirectory=settingJs.configs.uploadDirectory.thumb_product||"/files/thumb_image/product_image/",f.submitted=!1,f.lockForm=!1,f.data=a.data,f.allowAddCart=!0,f.popupDetail=d,f.addToCart=l,f.decreaseCart=h,f.getCart=p,f.checkDateProduct=g,f.checkImgOld=s.checkImgOld,f.addToCartGA=s.addToCartGA,angular.element("#mod-user-wishlist #hide1").removeClass("hide")}e.$inject=["$scope","$rootScope","$state","$window","$bzPopup","$uibModal","bzResourceSvc","userSvc","orderApiSvc","apiProductSvc"],angular.module("bzUser").controller("favoriteProductCtrl",e)}(),function(){function e(e,n,t,a,o,r){function i(e){u.submitted=!0,u.lockForm=!0,e?r.postChangePass(u.formData).then(function(e){o.toastr({type:"success",data:{title:"Thành công",message:"Đổi mật khẩu thành công"}}),r.siteLogout(),a.location.href="/"})["catch"](function(e){o.toastr({type:"error",data:{title:"Lỗi",message:e.data.message}}),u.lockForm=!1}):(u.submitted=!0,u.lockForm=!1)}var u=this;u.formData={},u.submitted=!1,u.lockForm=!1,u.changePass=i}e.$inject=["$scope","$rootScope","$state","$window","$bzPopup","authSvc"],angular.module("bzUser").controller("changePassCtrl",e)}();var productDetail=function(){function e(e,n,t,a,o,r,i){function u(){y.detail_infor=$("#text-detail")[0].innerHTML,setTimeout(function(){angular.element("#mod-detail .col-xs-11.col-left .row").removeAttr("style"),angular.element("#mod-detail .col-xs-11.col-left .row.text-center").addClass("hidden");var e=angular.element("#mod-detail #text-detail").height();e>350&&(y.showDetailContent=!0,y.detailContent="hideContent",y.detailContentStyle={overflow:"hidden","max-height":"350px"})},100)}function c(e){y.allowAddCart&&(y.allowAddCart=!1,r.addToCart(e,function(e){d()}))}function s(e,n){r.decreaseCart(e,n,function(e){d()})}function d(){if(n.Cart.items)try{y.data.product.cart=n.Cart.items.find(function(e){return y.data.product._id==e.id_product}),y.monthPro&&(y.monthPro=y.monthPro.map(function(e){return{id_product:e.id_product,cart:n.Cart.items.find(function(n){return e.id_product==n.id_product})}})),y.relativePro&&(y.relativePro=y.relativePro.map(function(e){return{id_product:e.id_product,cart:n.Cart.items.find(function(n){return e.id_product==n.id_product})}}))}catch(e){if(y.data.product.cart=r.findByIdProduct(n.Cart.items,y.data.product._id),y.monthPro)for(var t=0;t<y.monthPro.length;t++){var a=y.monthPro[t];a&&(y.monthPro[t]=p(a.id_product))}if(y.relativePro)for(var t=0;t<y.relativePro.length;t++){var a=y.relativePro[t];a&&(y.relativePro[t]=p(a.id_product))}}angular.element(".button").removeClass("hidden"),y.allowAddCart=!0}function p(e){var t;try{t=n.Cart.items.find(function(n){return n.id_product==e})}catch(a){t=r.findByIdProduct(n.Cart.items,e)}return{id_product:e,cart:t}}function l(){y.data.user.favorite_product.push(y.data.product._id),o.updateFavoriteProduct(y.data.user,y.data.user._id).then(function(e){})["catch"](function(e){console.log(e),$bzPopup.toastr({type:"error",data:{title:"Lỗi",message:"Có lỗi. Hãy thử lại"}});var n=y.data.user.favorite_product.indexOf(y.data.product._id);n!=-1&&y.data.user.favorite_product.splice(n,1)})}function h(){var e=y.data.user.favorite_product.indexOf(y.data.product._id);y.data.user.favorite_product.splice(e,1),o.updateFavoriteProduct(y.data.user,y.data.user._id).then(function(e){})["catch"](function(n){console.log(n),$bzPopup.toastr({type:"error",data:{title:"Lỗi",message:"Có lỗi. Hãy thử lại"}}),y.data.user.favorite_product.push(y.data.product._id),e!=-1&&y.data.user.favorite_product.splice(e,1)})}function g(e){return!e||(e=moment(e),moment().isBefore(e))}function f(){"hideContent"==y.detailContent?(y.detailContent="showContent",y.detailContentStyle={"max-height":"auto"}):($("#text-detail").html(y.detail_infor),y.detailContent="hideContent",y.detailContentStyle={overflow:"hidden","max-height":"350px"})}function m(){i.popLogin()}var y=e;y.data=t.data,y.credentials=t.credentials,y.allowAddCart=!0,y.monthPro=[],y.relativePro=[],y.showDetailContent=!1,y.popProDetail=r.popupDetailPro,y.addToCartGA=r.addToCartGA,y.addToCart=c,y.decreaseCart=s,y.findPro=p,y.addFavoriteProduct=l,y.removeFavoriteProduct=h,y.checkDueDate=g,y.login=m,y.showDetail=f,y.$on("Cart:getCart",d),angular.element(".share-section").removeClass("hidden"),u()}e.$inject=["$scope","$rootScope","$window","orderApiSvc","userSvcApi","apiProductSvc","authSvc"],angular.module("bzProduct").controller("productDetailCtrl",e)}(),category=function(){function e(e,n,t,a,o,r,i,u){function c(){y.filter=[],y.tagProcessings.forEach(function(e,n){e&&y.filter.push(n)})}function s(){helperJsCustom.GA("send","event",y.ga_category,y.sortListGa[parseInt(y.sort_tag)],"")}function d(){angular.element("#mod-category .col-left").stick_in_parent().on("sticky_kit:stick",function(e){$(this).parent().find(".col-left").css("margin-top","80px")}).on("sticky_kit:bottom",function(e){$(this).parent().css("position","static")}).on("sticky_kit:unstick",function(e){$(this).parent().find(".col-left").css("margin-top","")})}function p(){var e="";y.search&&y.queries.push({type:"q",value:y.search}),y.queries.push({type:"sort",value:y.sort_tag}),y.filter.length>0&&y.queries.push({type:"filter",value:y.filter.join(".")}),y.queries.forEach(function(n,t){0!=t&&(e+="&"),e+=n.type+"="+n.value}),e.length>0&&(window.location.href=settingJs.configs.webUrl+t.path()+"?"+e)}function l(){if(o.Cart){try{y.data.products.forEach(function(e){e.cart=o.Cart.items.find(function(n){return n.id_product==e._id})})}catch(e){for(var n=0;n<y.data.products.length;n++){var t=y.data.products[n];y.data.products[n].cart=u.findByIdProduct(o.Cart.items,t._id)}}y.allowAddCart=!0}}function h(e){y.allowAddCart&&(y.allowAddCart=!1,u.addToCart(e,function(e){l()}))}function g(e,n){u.decreaseCart(e,n,function(e){l()})}function f(){y.sumProductShow+=y.productsShowDone,$("#mod-category .col-left").css({position:"fixed",top:"0"})}function m(e){var n=$("#mod-footer").height(),t=$("#header").height(),a=$(document).height(),o=a-n-t-1e3;if($(this).scrollTop()>o&&y.countScroll<=y.milestoneShow){y.sumProductShow=0;for(var r=0;r<y.countScroll;r++){y.milestone[r];y.sumProductShow+=y.milestone[r]}y.countScroll++,y.$apply()}}var y=e;y.data=n.data,y.ga_category=n.ga_category,y.sortListGa=["ClickSortSanPhamNoiBat","ClickSortSanPhamBanChay","ClickSortSanPhamKhuyenMai"],y.sort_tag=t.search().sort||"0",y.queries=[],y.allowAddCart=!0,y.search=t.search().q,y.tagProcessingsTmp=t.search().filter?t.search().filter.split("."):[],y.tagProcessings=y.data.tag_processing.map(function(e,n){return y.tagProcessingsTmp.indexOf(n.toString())!=-1}),y.countScroll=1,y.milestone=[20,16,16],y.productsShowDone=16,y.milestoneShow=3,y.sumProductShow=y.milestone[0],y.products_length=y.data.products.length,y.sortTag=s,y.popupDetail=u.popupDetailPro,y.addToCart=h,y.decreaseCart=g,y.showMoreProduct=f,y.filterTag=c,y.reloadPage=p,y.addToCartGA=u.addToCartGA,y.$on("Cart:getCart",l),$(window).scroll(m),c(),angular.element("#mod-category .button-view-more").removeClass("hidden"),angular.element("#mod-category .take-cart").removeClass("hidden"),angular.element("#mod-category #product-list").removeAttr("style"),d()}e.$inject=["$scope","$window","$location","$uibModal","$rootScope","webProductSvc","orderApiSvc","apiProductSvc"],angular.module("bzProduct").controller("categoryCtrl",e)}(),orderWebCtrl=function(){function e(e,n,t,a,o,r,i,u,c,s,d){function p(){o.getShippingFee().then(function(e){e.success&&(M.data.list_shipping_fee=e.data,h(),f())}),"undefined"!=typeof fbq&&fbq("track","InitiateCheckout")}function l(){o.getShippingAddressUser().then(function(e){e.success&&(M.data.list_shipping_address=e.list_shipping_address,e.list_shipping_address.length>0&&(M.data.shipping_address.id=M.data.list_shipping_address[0]._id,M.data.shipping_address.name=M.data.list_shipping_address[0].name,M.data.shipping_address.phone=M.data.list_shipping_address[0].phone,M.data.shipping_address.address_detail=M.data.list_shipping_address[0].address_detail,M.data.shipping_address.id_shipping_fee=M.data.list_shipping_address[0].id_shipping_fee._id,M.data.shipping_address.district=M.data.list_shipping_address[0].id_shipping_fee.district,M.data.shipping_address.vocative=M.data.list_shipping_address[0].vocative,h()))})}function h(){M.data.shipping_fee=0;var e=!1,n=t.Cart.total-M.data.coupon.money-("CHIEU"==M.data.delivery_time?"PC"==t.promotionForOrderDeleveryOnAffternoon.type?t.promotionForOrderDeleveryOnAffternoon.value/100*t.Cart.total:t.promotionForOrderDeleveryOnAffternoon.value:0)-(M.data.firstOrder?"MN"==t.promotionForFirstOrder.type?t.promotionForFirstOrder.value:t.promotionForFirstOrder.value/100*t.Cart.total:0);M.data.list_shipping_fee.forEach(function(a,o){a._id+""==M.data.shipping_address.id_shipping_fee+""&&(M.data.shipping_address.district=a.district,M.data.obj_shipping_fee=a,M.data.shipping_fee=a.fee,(1==a.type||"1"==a.type)&&n>=t.freeShipUrban.value&&(M.data.freeShip=1,e=!0,M.data.shipping_fee=0),(2==a.type||"2"==a.type)&&n>=t.freeShipSuburb.value&&(M.data.freeShip=2,e=!0,M.data.shipping_fee=0))}),e||(M.data.freeShip=0)}function g(){M.data.coupon.code=M.data.coupon.code.toUpperCase(),y()}function f(){if(M.data.coupon.code&&"string"==typeof M.data.coupon.code){M.data.coupon.disable=!0,M.data.coupon.onLoadingCoupon=!0;var e={shipping_address:M.data.shipping_address,email:M.data.isLogined?M.data.user.email:"",coupon:M.data.coupon.code,id_shipping_fee:M.data.shipping_address.id_shipping_fee,vocative:M.data.vocative,delivery_time:M.data.delivery_time,payment_method:M.data.payment_method,note:M.data.note};o.checkCoupon(e,M.data.coupon.code).then(function(e){if(M.data.coupon.onLoadingCoupon=!1,e.success){var n=t.Cart.total+M.data.shipping_fee-e.money_coupon-("CHIEU"==M.data.delivery_time?"PC"==t.promotionForOrderDeleveryOnAffternoon.type?t.promotionForOrderDeleveryOnAffternoon.value/100*t.Cart.total:t.promotionForOrderDeleveryOnAffternoon.value:0)-(M.data.firstOrder?"MN"==t.promotionForFirstOrder.type?t.promotionForFirstOrder.value:t.promotionForFirstOrder.value/100*t.Cart.total:0);
n<=0?(M.data.coupon.error=!0,M.data.coupon.message="Giá trị đơn hàng không đủ để áp dụng khuyến mãi"):(M.data.coupon.coupon=e.coupon,M.data.coupon.money_coupon=e.money_coupon,M.data.coupon.error=!1,m(M.data.coupon.coupon))}else y(),M.data.coupon.error=!0,M.data.coupon.message=e.message})["catch"](function(e){console.log("coupon",e)})}}function m(e){e?(M.data.coupon.id=e._id,M.data.coupon.hasCounpon=!0,M.data.coupon.name=e.name,M.data.coupon.error=!1,M.data.coupon.money=M.data.coupon.money_coupon,h()):(M.data.coupon.error=!0,M.data.coupon.message="Thao tác không đúng")}function y(){M.data.coupon.coupon=null,M.data.coupon.hasCounpon=!1,M.data.coupon.id=null,M.data.coupon.error=!1,M.data.coupon.message=null,M.data.coupon.name="",M.data.coupon.money=0,M.data.coupon.money_coupon=0,M.data.coupon.disable=!1}function v(){r.getCart().then(function(e){h()})["catch"](function(e){console.log("err get cart",e)})}function H(e){if(helperJsCustom.GA("send","event","Checkout","ClickButtonConfirmOrder",""),M.sendingOrder=!0,M.data.submitted=!0,""==M.data.coupon.code||M.data.coupon.error||M.data.coupon.hasCounpon)if(0==t.Cart.total_quantity)i.toastr({type:"error",data:{title:"Lỗi đặt hàng",message:"Bạn chưa chọn sản phẩm"}}),M.sendingOrder=!1;else if(M.data.showFormAddressDetails&&e)i.toastr({type:"error",data:{title:"Lỗi đặt hàng",message:"Vui lòng nhập đầy đủ và đúng thông tin đơn hàng"}}),M.sendingOrder=!1;else{var a={shipping_address:M.data.shipping_address,email:M.data.isLogined?M.data.user.email:"",coupon:null!==M.data.coupon.id?M.data.coupon.id:"",id_shipping_fee:M.data.shipping_address.id_shipping_fee,vocative:M.data.vocative,delivery_time:M.data.delivery_time,payment_method:M.data.payment_method,note:M.data.note};if(!M.data.isLogined){var r={id_user:M.data.user.uid,email:a.email,name:a.shipping_address.name,phone:a.shipping_address.phone,address_detail:a.shipping_address.address_detail,vocative:a.shipping_address.vocative,delivery_time:a.delivery_time,payment_method:a.payment_method,id_shipping_fee:a.id_shipping_fee};d.setInfoUser(r)}o.sendOrder(a).then(function(e){"undefined"!=typeof fbq&&fbq("track","Purchase",{value:e.total_pay,currency:"VND"}),n.location.href="/dat-hang-thanh-cong/"+e.id_order})["catch"](function(e){M.sendingOrder=!1,i.toastr({type:"error",data:{title:"Lỗi đặt hàng",message:e.data.message}})})}else i.toastr({type:"error",data:{title:"Đặt hàng",message:"Bạn đã nhập coupon nhưng chưa áp dụng. Hãy bấm áp dụng để được khuyến mãi"}}),M.sendingOrder=!1}function T(e,n){r.deleteProduct(e).then(function(e){})["catch"](function(e){console.log(e)})}function b(){r.orderApiSvc().then(function(e){})["catch"](function(e){})}function C(e,n){r.update("set-quantity",{product:e,quantity:n}).then(function(e){e.success&&(y(),f(),h()),0==t.Cart.total_quantity?M.sendingOrder=!0:M.sendingOrder=!1,e.success||i.toastr({type:"error",data:{title:"Lỗi đặt hàng",message:e.message}})})["catch"](function(e){console.log("Lỗi đặt hàng",e)})}function _(){M.data.user=n.user,l(),""!==M.data.user.uid?(M.data.isLogined=!0,k(),d.removeInfoUser()):P()}function $(){a.api(n.settings.services.apiUrl+"/order/config-text").get({},function(e){t.TextOrderConfig=e.data},function(e){console.log("err getConfigTextOrder",e)})}function w(){a.api(n.settings.services.apiUrl+"/order/cf-order-affternoon").get({},function(e){t.promotionForOrderDeleveryOnAffternoon=e},function(e){console.log("err cfOrderAffernoon",e)})}function S(){a.api(n.settings.services.apiUrl+"/order/config-free-ship").get({},function(e){t.freeShipUrban=e.Urban,t.freeShipSuburb=e.Suburb,h()},function(e){console.log("err getConfigFreeShip",e)})}function k(){M.data.isLogined&&M.data.user.uid&&a.api(n.settings.services.apiUrl+"/order/is-first-order/"+M.data.user.uid).get({},function(e){M.data.firstOrder=e.success,M.data.firstOrder&&(t.promotionForFirstOrder=e.config)},function(e){})}function P(){var e=d.getInfoUser();e&&(M.data.shipping_address.phone=e.phone||"",M.data.shipping_address.vocative=e.vocative||"",M.data.shipping_address.district=e.district||"",M.data.shipping_address.name=e.name||"",M.data.shipping_address.id_shipping_fee=e.id_shipping_fee||"",M.data.shipping_address.address_detail=e.address_detail||"",M.data.delivery_time=e.delivery_time,M.data.payment_method=e.payment_method)}function D(){c.popLogin()}function L(e){return!!(e&&e.end_date&&Date.parse(e.end_date)<Date.now())}function A(e,n){u.popupDetailPro(e,n)}function F(e){e&&(M.data.shipping_address={id:"",name:"",phone:"",address_detail:"",id_shipping_fee:""},M.data.submitted=!1),M.data.showFormAddressDetails=e}function x(e){M.data.shipping_address.name=M.data.list_shipping_address[e]._id,M.data.shipping_address.name=M.data.list_shipping_address[e].name,M.data.shipping_address.phone=M.data.list_shipping_address[e].phone,M.data.shipping_address.address_detail=M.data.list_shipping_address[e].address_detail,M.data.shipping_address.id_shipping_fee=M.data.list_shipping_address[e].id_shipping_fee?M.data.list_shipping_address[e].id_shipping_fee._id:null,M.data.shipping_address.district=M.data.list_shipping_address[e].id_shipping_fee?M.data.list_shipping_address[e].id_shipping_fee.district:"",M.data.shipping_address.vocative=M.data.list_shipping_address[e].vocative,h(),f()}function B(){helperJsCustom.GA("send","event","CartDetail","ClickButtonOrder",""),0==t.Cart.items.length?i.toastr({type:"error",data:{title:"Đặt hàng",message:"Giỏ hàng của bạn chưa có sản phẩm nào"}}):n.location.href="/dat-hang"}var M=this;M.setQuantity=C,M.deleteProductInCart=T,M.deleteCart=b,M.checkCoupon=f,M.cancelCoupon=y,M.applyCoupon=m,M.onEnterCoupon=g,M.onSelectShippingAddress=x,M.showFormAddressDetails=F,M.getShippingFee=p,M.setShippingFee=h,M.login=D,M.showDetailProduct=A,M.checkDueDateProduct=L,M.sendOrder=H,M.imgThumbProductDir=settingJs.configs.uploadDirectory.thumb_product||"/files/thumb_image/product_image/",M.sendingOrder=!1,M.openPageCheckout=B,M.data={isLogined:!1,freeShip:0,firstOrder:!1,submitted:!1,showFormAddressDetails:!1,shipping_address:{id:"",name:"",phone:"",district:"",address_detail:"",id_shipping_fee:"",vocative:"Anh"},shipping_fee:0,obj_shipping_fee:null,vocative:"",delivery_time:"CHIEU",payment_method:"COD",coupon:{id:null,error:!1,code:"",hasCounpon:!1,money:0,money_coupon:0,onLoadingCoupon:!1,coupon:null},user:null,list_shipping_address:[],list_shipping_fee:[]},_(),v(),$(),S(),w(),angular.element("#mod-checkout").removeClass("hidden"),angular.element("#mod-card").removeClass("hidden"),angular.element("#mod-cart-moblie").removeClass("hidden"),M.checkImgOld=u.checkImgOld}e.$inject=["$scope","$window","$rootScope","bzResourceSvc","orderWebSvc","orderApiSvc","$bzPopup","apiProductSvc","authSvc","$uibModal","bzUtilsSvc"],angular.module("bzWebOrder").controller("orderWebCtrl",e)}(),vocabularyWebCtrl=function(){function e(e,n,t,a){function o(){s.listVocabulary.length>0&&(s.index=0,s.word=s.listVocabulary[s.index])}function r(){responsiveVoice.speak(s.word.word)}function i(){s.listVocabulary.length-1>s.index&&(s.index++,s.word=s.listVocabulary[s.index])}function u(){s.index>1&&(s.index--,s.word=s.listVocabulary[s.index])}function c(e){var n="";return a.forEach(function(t){t.value==""+e&&(n=t.name)}),n}var s=this;s.imgDir=settingJs.configs.uploadDirectory.vocabulary||"/files/images/vocabulary_image/",s.Domain=settingJs.configs.webUrl,s.listVocabulary=n.vocabularys,s.index=-1,o(),s.speak=r,s.next=i,s.prev=u,s.getClasses=c}e.$inject=["$scope","$window","bzResourceSvc","listTypesWord"],angular.module("bsLearning").controller("vocabularyWebCtrl",e)}(),exercise_1_Ctrl=function(){function e(e,n,t){var a=this,o=null,r=null;a.showDemos=!1,a.edgeDetection=!1,a.mono=!1,a.invert=!1,a.patOpts={x:0,y:0,w:25,h:25},a.channel={},a.webcamError=!1,a.onError=function(n){e.$apply(function(){e.webcamError=n})},a.onSuccess=function(){o=a.channel.video,e.$apply(function(){a.patOpts.w=o.width,a.patOpts.h=o.height,a.showDemos=!0})},a.onStream=function(e){},a.makeSnapshot=function(){if(o){var e=document.querySelector("#snapshot");if(!e)return;e.width=o.width,e.height=o.height;var n=e.getContext("2d"),t=i(a.patOpts.x,a.patOpts.y,a.patOpts.w,a.patOpts.h);n.putImageData(t,0,0),u(e.toDataURL()),r=t}},a.downloadSnapshot=function(e){window.location.href=e};var i=function(e,n,t,a){var r=document.createElement("canvas");r.width=o.width,r.height=o.height;var i=r.getContext("2d");return i.drawImage(o,0,0,o.width,o.height),i.getImageData(e,n,t,a)},u=function(e){a.snapshotData=e}}e.$inject=["$scope","$window","bzResourceSvc"],angular.module("bsLearning").controller("exercise_1_Ctrl",e)}(),searchCtrl=function(){function e(e,n,t,a,o,r,i){function u(e){h.search=h.params.q,h.section=e,$(e).find(".search-input").removeAttr("disabled").autocomplete({source:function(e,n){},minLength:1}),$(e).find("#error-section").removeClass("hidden"),$(e).find(".search-section").removeClass("hidden"),$(e).removeAttr("style")}function c(t){if(helperJsCustom.GA("send","event","Header","ClickSearchButton",""),!t.$valid)return void(e.search_input="error");if(t.$submitted=!1,0==h.search_selected.type&&r.addSearch({search:sanitizeHtml(h.search_selected.text)}).then(function(t){return t.success?void(n.location.href=n.settings.services.webUrl+"/tim-kiem?q="+encodeURI(sanitizeHtml(h.search))):void(e.search_input="error")}),1==h.search_selected.type){var a=h.search_selected;n.location.href=n.settings.services.webUrl+"/san-pham/"+a.slug+"-"+a.id}}function s(e){r.addSearch({search:e}).then(function(t){t.success&&(n.location.href=n.settings.services.webUrl+"/tim-kiem?q="+encodeURI(sanitizeHtml(e)))})}function d(n){n.$submitted=!1,h.searching=!0,e.search_input="",r.search({q:h.search}).then(function(e){h.searchTxt=e.searchList,h.productTxt=e.productList,h.searching=!1,h.index_search=0,t(function(){l(h.section),p(h.section)},100)})}function p(n){var t=$(n).find(".searching .select"),a=$(n).find(".search-input");(h.searchTxt.length>0||h.productTxt.length>0)&&a.on("keyup",function(n){if(40==n.keyCode&&h.index_search<=h.selectArr.length-3&&h.index_search++,38==n.keyCode&&h.index_search>=0&&h.index_search--,40==n.keyCode||38==n.keyCode){t.removeClass("selected_item");var a=h.index_search,o=h.selectArr[a+1];h.search=o.text,h.search_selected=o,e.$apply(),$(t[a]).addClass("selected_item")}})}function l(e){var n=$(e).find(".searching .select"),t=$(e).find(".search-input");t.unbind("keyup"),n.removeClass("selected_item"),h.selectArr=[{text:h.search,type:0}].concat(h.searchTxt.map(function(e){return{text:e.keyword,type:0}})).concat(h.productTxt.map(function(e){return{text:e.name,type:1,slug:e.slug,id:e._id}})),h.index_search=-1,h.search_selected=h.selectArr[0]}var h=e;h.params=a.search(),h.settings=n.settings,h.imagesDirectory=settingJs.configs.uploadDirectory.thumb_product||"/files/thumb_image/product_image/",h.imagesProductDirectory=settingJs.configs.uploadDirectory.product||"/files/product_image/",h.init=u,h.submit=c,h.link=s,h.searchResult=d,h.checkImgOld=i.checkImgOld}e.$inject=["$scope","$window","$timeout","$location","bzResourceSvc","WebSearchSvc","apiProductSvc"],angular.module("bzWebHome").controller("searchCtrl",e)}(),homeCtrl=function(){function e(e,n,t,a,o,r){function i(e){d.allowAddCart&&(d.allowAddCart=!1,r.addToCart(e,function(e){s()}))}function u(e,n){r.decreaseCart(e,n,function(e){s()})}function c(e){var n;try{n=a.Cart.items.find(function(n){return n.id_product==e})}catch(t){n=r.findByIdProduct(a.Cart.items,e)}return{id_product:e,cart:n}}function s(e,n){if(a.Cart){try{d.cart_category=d.cart_category.map(function(e,n){var t=$.map(e,function(e,n){return[e]}).map(function(e){return{id_product:e.id_product,cart:a.Cart.items.find(function(n){return e.id_product==n.id_product})}});return t})}catch(t){for(var o=d.cart_category,r=0;r<o.length;r++)for(var i=o[r],u=$.map(i,function(e,n){return[e]}),s=0;s<u.length;s++)o[r][s]=c(u[s].id_product);d.cart_category=o}d.cartDone=!0,d.allowAddCart=!0}}var d=e;d.data=n.data,d.allowAddCart=!0,d.cart_category=[],d.cart_tag=[],d.categories_list=n.category_menu.categories_list,d.addToCart=i,d.findPro=c,d.decreaseCart=u,d.popDetPro=r.popupDetailPro,d.addToCartGA=r.addToCartGA,d.$on("Cart:getCart",s),angular.element(".take-cart").removeClass("hidden"),angular.element(".choose-bottom").removeClass("hidden")}e.$inject=["$scope","$window","$uibModal","$rootScope","orderApiSvc","apiProductSvc"],angular.module("bzWebHome").controller("homeCtrl",e)}(),dictionaryWebCtrl=function(){function e(e,n,t){var a=this;a.wordSelected=null,a.Domain=settingJs.configs.webUrl,a.lang="en",a.remoteUrlRequestFn=function(e){return{word:e}},a.onSelected=function(e){e?a.wordSelected=e.originalObject:a.wordSelected=null},a.changeLanguage=function(e){a.lang=e},a.speak=function(){responsiveVoice.speak(a.wordSelected.word)}}e.$inject=["$scope","$window","bzResourceSvc"],angular.module("bsDictionary").controller("dictionaryWebCtrl",e)}(),blogWebCtrl=function(){function e(e,n,t,a){var o=this;o.imgDir=settingJs.configs.uploadDirectory.blog||"/files/images/blog_image/",o.tags=[],o.Domain=settingJs.configs.webUrl}e.$inject=["$scope","$window","blogWebSvc","bzResourceSvc"],angular.module("bzWebBlog").controller("blogWebCtrl",e)}();!function(){function e(e,n,t,a,o,r){function i(e){u.submitted=!0,u.lockForm=!0,e?r.resetPassword(u.formData).then(function(e){o.toastr({type:"success",data:{title:"Thành công",message:"Đổi mật khẩu thành công"}}),a.location.href="/"})["catch"](function(e){o.toastr({type:"error",data:{title:"Lỗi",message:e.data.message}}),u.lockForm=!1}):(u.submitted=!0,u.lockForm=!1)}var u=this;u.formData={},u.submitted=!1,u.lockForm=!1,u.formData.token=a.data.resetPasswordToken,u.resetPass=i,angular.element("#hide1").removeClass("hidden")}e.$inject=["$scope","$rootScope","$state","$window","$bzPopup","authSvc"],angular.module("bzAuth").controller("resetPassCtrl",e)}(),function(){function e(e,n,t,a,o,r,i){function u(){h.lockForm=!1,h.submitted=!1,h.formData={email:"",password:""}}function c(){if(t.user.uid){t.user.uid;o.api(t.settings.services.apiUrl+"/user/profile/:id",{id:"@id"}).get({id:"id"},function(e){h.user=e;var n=h.user.name,t=n.split(" ");h.name=t[t.length-1],h.urlAvatar=settings.services.webUrl+settingJs.configs.uploadDirectory.avatar+e.avatar})}}function s(){r.popLogin()}function d(){r.popRegister()}function p(){r.popForgotPass()}function l(){r.siteLogout(function(e){})}var h=this;h.user={},h.showPopupLogin=s,h.getInfo=c,h.showPopupRegister=d,h.popForgotPass=p,h.logout=l,c(),u(),angular.element("#sign-in-out-mb").removeClass("hidden"),angular.element("#sign-in-out-desk").removeClass("hidden"),angular.element(".avatar").removeClass("hidden")}e.$inject=["$scope","$state","$window","$bzPopup","bzResourceSvc","authSvc","$uibModal"],angular.module("bzAuth").controller("authCtrl",e)}(),function(){function e(e,n){return{scope:{atrOptions:"=atrOptions"},link:function(n,t,a){e(function(){t.slick(n.atrOptions)},10)}}}e.$inject=["$timeout","$parse"],angular.module("bzApp").directive("slickPopupProductDetail",e)}();var category=function(){function e(){return function(e,n){var t=[];if(n){var a=Object.keys(n).map(function(e){return n[e]}).find(function(e){return e});n=a?n:void 0}return n?(e.forEach(function(e){var a=e.tag_processing.find(function(e){return n[e.id_tag]});a&&t.push(e)}),t):e}}angular.module("bzProduct").filter("productTag",e)}();